import{r as d,j as a,g as Ir,R as B,e as jr}from"./index-CCKnoTQH.js";import{c as Ie,a as at}from"./helper-jIGjUHP-.js";import{b as Rr,L as _n,c as Ar,d as Vn,a as qe,e as Tr,u as Mr}from"./index-BFvOwPqs.js";import{t as zr}from"./lodash-Ch6W0gOk.js";import{u as Dr}from"./use-ref-value-D-0nkEV1.js";import{j as Nr,a as Tt,u as Bn,s as kr,H as Fr}from"./owner-yJWbyhtD.js";import{e as pn,a as Lr,u as vn}from"./use-event-callback-HURIHk33.js";import{c as Or,M as Yt}from"./StyledButton-CKs5B7yH.js";import{u as _r,D as an}from"./use-is-unmounted-BKukWyEH.js";import{d as Vr,e as Hn,f as Ke,g as En,h as Br,i as wt,j as Mt}from"./index-DpadiLKm.js";import{n as Hr,s as Ur}from"./dom-BowoBODo.js";import{F as Wr}from"./FloatPopover-YdNFrsCN.js";import{A as Xr,m as it}from"./proxy-1Ogy_4R7.js";import{u as In}from"./use-spring-C0JYjNxB.js";import{u as Yr}from"./use-drag-controls-CxYO36RP.js";const Un=d.createContext(Tt([])),si=({children:e,images:t})=>{const r=Dr(()=>Tt(t));return d.useEffect(()=>{Nr.set(r,t)},[t]),a.jsx(Un.Provider,{value:r,children:e})},zt=e=>Bn(kr(d.useContext(Un),d.useCallback(t=>t.find(r=>r.src===e),[e]))),Wn=()=>{};function qt(e){const t=d.createContext(e),r=d.createContext(Wn);return[o=>{let{children:i,initialState:c}=o;const[m,u]=d.useState(c??e);return a.jsx(t.Provider,{value:m,children:a.jsx(r.Provider,{value:u,children:i})})},()=>d.useContext(t),()=>d.useContext(r),t]}const Gr=({contexts:e,children:t})=>e.reduceRight((r,o)=>d.cloneElement(o,{children:r}),t),sn=e=>{const t=d.useRef(e);return d.useEffect(()=>{t.current=e},[e]),t};Tt(!1);Tt(0);const $r=Tt(null),qr=()=>Bn($r),[Kr,Jr,Zr]=qt(void 0),[Qr,Xn,eo]=qt({h:0,w:0}),[to,li,no]=qt({x:0,y:0}),[ro,ci,oo]=qt(!1),ao=[a.jsx(Kr,{},"ArticleElementProviderInternal"),a.jsx(Qr,{},"ElementSizeProviderInternal"),a.jsx(to,{},"ElementPositionProviderInternal"),a.jsx(ro,{},"IsEOArticleElementProviderInternal")],io=({children:e,className:t,...r})=>a.jsxs(Gr,{contexts:ao,children:[a.jsx(so,{}),a.jsx(Yn,{...r,className:t,children:e})]}),so=()=>{const e=eo(),t=no(),r=Jr();return pn(()=>{if(!r)return;const{height:o,width:i,left:c,top:m}=r.getBoundingClientRect();e({h:o,w:i});const u=window.scrollX+c,g=window.scrollY+m;t({x:u,y:g});const b=new ResizeObserver(I=>{const x=I[0],{height:C,width:z}=x.contentRect,{left:N,top:M}=r.getBoundingClientRect(),T=window.scrollX+N,E=window.scrollY+M;e(R=>R.h===C&&R.w===z?R:{h:C,w:z}),t(R=>R.x===T&&R.y===E?R:{x:T,y:E})});return b.observe(r),()=>{b.unobserve(r),b.disconnect()}},[r]),null},Yn=d.memo(({children:e,className:t,eoaDetect:r,as:o="div"})=>{const i=Zr(),c=o;return a.jsxs(c,{className:Ie("relative",t),ref:i,children:[e,r&&a.jsx(lo,{})]})});Yn.displayName="ArticleElementProviderContent";const lo=()=>{const e=qr(),t=sn(e),r=oo(),o=d.useRef(null);return d.useEffect(()=>{if(!o.current)return;const i=o.current,c=new IntersectionObserver(m=>{const u=m[0];!u.isIntersecting&&t.current==="down"||r(u.isIntersecting)},{rootMargin:"0px 0px 0px 0px"});return c.observe(i),()=>{c.unobserve(i),c.disconnect()}},[]),a.jsx("div",{ref:o})};var Rt={exports:{}},co=Rt.exports,jn;function uo(){return jn||(jn=1,function(e,t){(function(){var r=function(l){if(l instanceof r)return l;if(!(this instanceof r))return new r(l);this.EXIFwrapped=l};e.exports&&(t=e.exports=r),t.EXIF=r;var o=r.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},i=r.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},c=r.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},m=r.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},u=r.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function g(l){return!!l.exifdata}function b(l,s){s=s||l.match(/^data\:([^\;]+)\;base64,/mi)[1]||"",l=l.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var h=atob(l),p=h.length,f=new ArrayBuffer(p),P=new Uint8Array(f),w=0;w<p;w++)P[w]=h.charCodeAt(w);return f}function I(l,s){var h=new XMLHttpRequest;h.open("GET",l,!0),h.responseType="blob",h.onload=function(p){(this.status==200||this.status===0)&&s(this.response)},h.send()}function x(l,s){function h(w){var v=C(w);l.exifdata=v||{};var k=z(w);if(l.iptcdata=k||{},r.isXmpEnabled){var A=F(w);l.xmpdata=A||{}}s&&s.call(l)}if(l.src)if(/^data\:/i.test(l.src)){var p=b(l.src);h(p)}else if(/^blob\:/i.test(l.src)){var f=new FileReader;f.onload=function(w){h(w.target.result)},I(l.src,function(w){f.readAsArrayBuffer(w)})}else{var P=new XMLHttpRequest;P.onload=function(){if(this.status==200||this.status===0)h(P.response);else throw"Could not load image";P=null},P.open("GET",l.src,!0),P.responseType="arraybuffer",P.send(null)}else if(self.FileReader&&(l instanceof self.Blob||l instanceof self.File)){var f=new FileReader;f.onload=function(v){h(v.target.result)},f.readAsArrayBuffer(l)}}function C(l){var s=new DataView(l);if(s.getUint8(0)!=255||s.getUint8(1)!=216)return!1;for(var h=2,p=l.byteLength,f;h<p;){if(s.getUint8(h)!=255)return!1;if(f=s.getUint8(h+1),f==225)return V(s,h+4,s.getUint16(h+2)-2);h+=2+s.getUint16(h+2)}}function z(l){var s=new DataView(l);if(s.getUint8(0)!=255||s.getUint8(1)!=216)return!1;for(var h=2,p=l.byteLength,f=function(k,A){return k.getUint8(A)===56&&k.getUint8(A+1)===66&&k.getUint8(A+2)===73&&k.getUint8(A+3)===77&&k.getUint8(A+4)===4&&k.getUint8(A+5)===4};h<p;){if(f(s,h)){var P=s.getUint8(h+7);P%2!==0&&(P+=1),P===0&&(P=4);var w=h+8+P,v=s.getUint16(h+6+P);return M(l,w,v)}h++}}var N={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function M(l,s,h){for(var p=new DataView(l),f={},P,w,v,k,A=s;A<s+h;)p.getUint8(A)===28&&p.getUint8(A+1)===2&&(k=p.getUint8(A+2),k in N&&(v=p.getInt16(A+3),w=N[k],P=S(p,A+5,v),f.hasOwnProperty(w)?f[w]instanceof Array?f[w].push(P):f[w]=[f[w],P]:f[w]=P)),A++;return f}function T(l,s,h,p,f){var P=l.getUint16(h,!f),w={},v,k,A;for(A=0;A<P;A++)v=h+A*12+2,k=p[l.getUint16(v,!f)],w[k]=E(l,v,s,h,f);return w}function E(l,s,h,p,f){var P=l.getUint16(s+2,!f),w=l.getUint32(s+4,!f),v=l.getUint32(s+8,!f)+h,k,A,Y,L,J,te;switch(P){case 1:case 7:if(w==1)return l.getUint8(s+8,!f);for(k=w>4?v:s+8,A=[],L=0;L<w;L++)A[L]=l.getUint8(k+L);return A;case 2:return k=w>4?v:s+8,S(l,k,w-1);case 3:if(w==1)return l.getUint16(s+8,!f);for(k=w>2?v:s+8,A=[],L=0;L<w;L++)A[L]=l.getUint16(k+2*L,!f);return A;case 4:if(w==1)return l.getUint32(s+8,!f);for(A=[],L=0;L<w;L++)A[L]=l.getUint32(v+4*L,!f);return A;case 5:if(w==1)return J=l.getUint32(v,!f),te=l.getUint32(v+4,!f),Y=new Number(J/te),Y.numerator=J,Y.denominator=te,Y;for(A=[],L=0;L<w;L++)J=l.getUint32(v+8*L,!f),te=l.getUint32(v+4+8*L,!f),A[L]=new Number(J/te),A[L].numerator=J,A[L].denominator=te;return A;case 9:if(w==1)return l.getInt32(s+8,!f);for(A=[],L=0;L<w;L++)A[L]=l.getInt32(v+4*L,!f);return A;case 10:if(w==1)return l.getInt32(v,!f)/l.getInt32(v+4,!f);for(A=[],L=0;L<w;L++)A[L]=l.getInt32(v+8*L,!f)/l.getInt32(v+4+8*L,!f);return A}}function R(l,s,h){var p=l.getUint16(s,!h);return l.getUint32(s+2+p*12,!h)}function D(l,s,h,p){var f=R(l,s+h,p);if(f){if(f>l.byteLength)return{}}else return{};var P=T(l,s,s+f,m,p);if(P.Compression)switch(P.Compression){case 6:if(P.JpegIFOffset&&P.JpegIFByteCount){var w=s+P.JpegIFOffset,v=P.JpegIFByteCount;P.blob=new Blob([new Uint8Array(l.buffer,w,v)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",P.Compression)}else P.PhotometricInterpretation==2&&console.log("Thumbnail image format is RGB, which is not implemented.");return P}function S(l,s,h){var p="";for(n=s;n<s+h;n++)p+=String.fromCharCode(l.getUint8(n));return p}function V(l,s){if(S(l,s,4)!="Exif")return!1;var h,p,f,P,w,v=s+6;if(l.getUint16(v)==18761)h=!1;else if(l.getUint16(v)==19789)h=!0;else return!1;if(l.getUint16(v+2,!h)!=42)return!1;var k=l.getUint32(v+4,!h);if(k<8)return!1;if(p=T(l,v,v+k,i,h),p.ExifIFDPointer){P=T(l,v,v+p.ExifIFDPointer,o,h);for(f in P){switch(f){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":P[f]=u[f][P[f]];break;case"ExifVersion":case"FlashpixVersion":P[f]=String.fromCharCode(P[f][0],P[f][1],P[f][2],P[f][3]);break;case"ComponentsConfiguration":P[f]=u.Components[P[f][0]]+u.Components[P[f][1]]+u.Components[P[f][2]]+u.Components[P[f][3]];break}p[f]=P[f]}}if(p.GPSInfoIFDPointer){w=T(l,v,v+p.GPSInfoIFDPointer,c,h);for(f in w){switch(f){case"GPSVersionID":w[f]=w[f][0]+"."+w[f][1]+"."+w[f][2]+"."+w[f][3];break}p[f]=w[f]}}return p.thumbnail=D(l,v,k,h),p}function F(l){if("DOMParser"in self){var s=new DataView(l);if(s.getUint8(0)!=255||s.getUint8(1)!=216)return!1;for(var h=2,p=l.byteLength,f=new DOMParser;h<p-4;)if(S(s,h,4)=="http"){var P=h-1,w=s.getUint16(h-2)-1,v=S(s,P,w),k=v.indexOf("xmpmeta>")+8;v=v.substring(v.indexOf("<x:xmpmeta"),k);var A=v.indexOf("x:xmpmeta")+10;v=v.slice(0,A)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+v.slice(A);var Y=f.parseFromString(v,"text/xml");return j(Y)}else h++}}function O(l){var s={};if(l.nodeType==1){if(l.attributes.length>0){s["@attributes"]={};for(var h=0;h<l.attributes.length;h++){var p=l.attributes.item(h);s["@attributes"][p.nodeName]=p.nodeValue}}}else if(l.nodeType==3)return l.nodeValue;if(l.hasChildNodes())for(var f=0;f<l.childNodes.length;f++){var P=l.childNodes.item(f),w=P.nodeName;if(s[w]==null)s[w]=O(P);else{if(s[w].push==null){var v=s[w];s[w]=[],s[w].push(v)}s[w].push(O(P))}}return s}function j(l){try{var s={};if(l.children.length>0)for(var h=0;h<l.children.length;h++){var p=l.children.item(h),f=p.attributes;for(var P in f){var w=f[P],v=w.nodeName,k=w.nodeValue;v!==void 0&&(s[v]=k)}var A=p.nodeName;if(typeof s[A]>"u")s[A]=O(p);else{if(typeof s[A].push>"u"){var Y=s[A];s[A]=[],s[A].push(Y)}s[A].push(O(p))}}else s=l.textContent;return s}catch(L){console.log(L.message)}}r.enableXmp=function(){r.isXmpEnabled=!0},r.disableXmp=function(){r.isXmpEnabled=!1},r.getData=function(l,s){return(self.Image&&l instanceof self.Image||self.HTMLImageElement&&l instanceof self.HTMLImageElement)&&!l.complete?!1:(g(l)?s&&s.call(l):x(l,s),!0)},r.getTag=function(l,s){if(g(l))return l.exifdata[s]},r.getIptcTag=function(l,s){if(g(l))return l.iptcdata[s]},r.getAllTags=function(l){if(!g(l))return{};var s,h=l.exifdata,p={};for(s in h)h.hasOwnProperty(s)&&(p[s]=h[s]);return p},r.getAllIptcTags=function(l){if(!g(l))return{};var s,h=l.iptcdata,p={};for(s in h)h.hasOwnProperty(s)&&(p[s]=h[s]);return p},r.pretty=function(l){if(!g(l))return"";var s,h=l.exifdata,p="";for(s in h)h.hasOwnProperty(s)&&(typeof h[s]=="object"?h[s]instanceof Number?p+=s+" : "+h[s]+" ["+h[s].numerator+"/"+h[s].denominator+`]\r
`:p+=s+" : ["+h[s].length+` values]\r
`:p+=s+" : "+h[s]+`\r
`);return p},r.readFromBinaryFile=function(l){return C(l)}}).call(co)}(Rt,Rt.exports)),Rt.exports}var mo=uo();const he=Ir(mo);/*! medium-zoom 1.1.0 | MIT License | https://github.com/francoischalifour/medium-zoom */var rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Bt=function(t){return t.tagName==="IMG"},fo=function(t){return NodeList.prototype.isPrototypeOf(t)},Wt=function(t){return t&&t.nodeType===1},Rn=function(t){var r=t.currentSrc||t.src;return r.substr(-4).toLowerCase()===".svg"},An=function(t){try{return Array.isArray(t)?t.filter(Bt):fo(t)?[].slice.call(t).filter(Bt):Wt(t)?[t].filter(Bt):typeof t=="string"?[].slice.call(document.querySelectorAll(t)).filter(Bt):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},ho=function(t){var r=document.createElement("div");return r.classList.add("medium-zoom-overlay"),r.style.background=t,r},go=function(t){var r=t.getBoundingClientRect(),o=r.top,i=r.left,c=r.width,m=r.height,u=t.cloneNode(),g=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,b=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return u.removeAttribute("id"),u.style.position="absolute",u.style.top=o+g+"px",u.style.left=i+b+"px",u.style.width=c+"px",u.style.height=m+"px",u.style.transform="",u},pt=function(t,r){var o=rt({bubbles:!1,cancelable:!1,detail:void 0},r);if(typeof window.CustomEvent=="function")return new CustomEvent(t,o);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,o.bubbles,o.cancelable,o.detail),i},po=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=window.Promise||function(p){function f(){}p(f,f)},i=function(p){var f=p.target;if(f===l){N();return}D.indexOf(f)!==-1&&M({target:f})},c=function(){if(!(V||!j.original)){var p=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(F-p)>O.scrollOffset&&setTimeout(N,150)}},m=function(p){var f=p.key||p.keyCode;(f==="Escape"||f==="Esc"||f===27)&&N()},u=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=p;if(p.background&&(l.style.background=p.background),p.container&&p.container instanceof Object&&(f.container=rt({},O.container,p.container)),p.template){var P=Wt(p.template)?p.template:document.querySelector(p.template);f.template=P}return O=rt({},O,f),D.forEach(function(w){w.dispatchEvent(pt("medium-zoom:update",{detail:{zoom:s}}))}),s},g=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e(rt({},O,p))},b=function(){for(var p=arguments.length,f=Array(p),P=0;P<p;P++)f[P]=arguments[P];var w=f.reduce(function(v,k){return[].concat(v,An(k))},[]);return w.filter(function(v){return D.indexOf(v)===-1}).forEach(function(v){D.push(v),v.classList.add("medium-zoom-image")}),S.forEach(function(v){var k=v.type,A=v.listener,Y=v.options;w.forEach(function(L){L.addEventListener(k,A,Y)})}),s},I=function(){for(var p=arguments.length,f=Array(p),P=0;P<p;P++)f[P]=arguments[P];j.zoomed&&N();var w=f.length>0?f.reduce(function(v,k){return[].concat(v,An(k))},[]):D;return w.forEach(function(v){v.classList.remove("medium-zoom-image"),v.dispatchEvent(pt("medium-zoom:detach",{detail:{zoom:s}}))}),D=D.filter(function(v){return w.indexOf(v)===-1}),s},x=function(p,f){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.forEach(function(w){w.addEventListener("medium-zoom:"+p,f,P)}),S.push({type:"medium-zoom:"+p,listener:f,options:P}),s},C=function(p,f){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.forEach(function(w){w.removeEventListener("medium-zoom:"+p,f,P)}),S=S.filter(function(w){return!(w.type==="medium-zoom:"+p&&w.listener.toString()===f.toString())}),s},z=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=p.target,P=function(){var v={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},k=void 0,A=void 0;if(O.container)if(O.container instanceof Object)v=rt({},v,O.container),k=v.width-v.left-v.right-O.margin*2,A=v.height-v.top-v.bottom-O.margin*2;else{var Y=Wt(O.container)?O.container:document.querySelector(O.container),L=Y.getBoundingClientRect(),J=L.width,te=L.height,je=L.left,ne=L.top;v=rt({},v,{width:J,height:te,left:je,top:ne})}k=k||v.width-O.margin*2,A=A||v.height-O.margin*2;var Z=j.zoomedHd||j.original,re=Rn(Z)?k:Z.naturalWidth||k,bt=Rn(Z)?A:Z.naturalHeight||A,oe=Z.getBoundingClientRect(),ae=oe.top,$=oe.left,Ve=oe.width,we=oe.height,Re=Math.min(Math.max(Ve,re),k)/Ve,Je=Math.min(Math.max(we,bt),A)/we,W=Math.min(Re,Je),lt=(-$+(k-Ve)/2+O.margin+v.left)/W,ce=(-ae+(A-we)/2+O.margin+v.top)/W,ye="scale("+W+") translate3d("+lt+"px, "+ce+"px, 0)";j.zoomed.style.transform=ye,j.zoomedHd&&(j.zoomedHd.style.transform=ye)};return new o(function(w){if(f&&D.indexOf(f)===-1){w(s);return}var v=function J(){V=!1,j.zoomed.removeEventListener("transitionend",J),j.original.dispatchEvent(pt("medium-zoom:opened",{detail:{zoom:s}})),w(s)};if(j.zoomed){w(s);return}if(f)j.original=f;else if(D.length>0){var k=D;j.original=k[0]}else{w(s);return}if(j.original.dispatchEvent(pt("medium-zoom:open",{detail:{zoom:s}})),F=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,V=!0,j.zoomed=go(j.original),document.body.appendChild(l),O.template){var A=Wt(O.template)?O.template:document.querySelector(O.template);j.template=document.createElement("div"),j.template.appendChild(A.content.cloneNode(!0)),document.body.appendChild(j.template)}if(j.original.parentElement&&j.original.parentElement.tagName==="PICTURE"&&j.original.currentSrc&&(j.zoomed.src=j.original.currentSrc),document.body.appendChild(j.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),j.original.classList.add("medium-zoom-image--hidden"),j.zoomed.classList.add("medium-zoom-image--opened"),j.zoomed.addEventListener("click",N),j.zoomed.addEventListener("transitionend",v),j.original.getAttribute("data-zoom-src")){j.zoomedHd=j.zoomed.cloneNode(),j.zoomedHd.removeAttribute("srcset"),j.zoomedHd.removeAttribute("sizes"),j.zoomedHd.removeAttribute("loading"),j.zoomedHd.src=j.zoomed.getAttribute("data-zoom-src"),j.zoomedHd.onerror=function(){clearInterval(Y),console.warn("Unable to reach the zoom image target "+j.zoomedHd.src),j.zoomedHd=null,P()};var Y=setInterval(function(){j.zoomedHd.complete&&(clearInterval(Y),j.zoomedHd.classList.add("medium-zoom-image--opened"),j.zoomedHd.addEventListener("click",N),document.body.appendChild(j.zoomedHd),P())},10)}else if(j.original.hasAttribute("srcset")){j.zoomedHd=j.zoomed.cloneNode(),j.zoomedHd.removeAttribute("sizes"),j.zoomedHd.removeAttribute("loading");var L=j.zoomedHd.addEventListener("load",function(){j.zoomedHd.removeEventListener("load",L),j.zoomedHd.classList.add("medium-zoom-image--opened"),j.zoomedHd.addEventListener("click",N),document.body.appendChild(j.zoomedHd),P()})}else P()})},N=function(){return new o(function(p){if(V||!j.original){p(s);return}var f=function P(){j.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(j.zoomed),j.zoomedHd&&document.body.removeChild(j.zoomedHd),document.body.removeChild(l),j.zoomed.classList.remove("medium-zoom-image--opened"),j.template&&document.body.removeChild(j.template),V=!1,j.zoomed.removeEventListener("transitionend",P),j.original.dispatchEvent(pt("medium-zoom:closed",{detail:{zoom:s}})),j.original=null,j.zoomed=null,j.zoomedHd=null,j.template=null,p(s)};V=!0,document.body.classList.remove("medium-zoom--opened"),j.zoomed.style.transform="",j.zoomedHd&&(j.zoomedHd.style.transform=""),j.template&&(j.template.style.transition="opacity 150ms",j.template.style.opacity=0),j.original.dispatchEvent(pt("medium-zoom:close",{detail:{zoom:s}})),j.zoomed.addEventListener("transitionend",f)})},M=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=p.target;return j.original?N():z({target:f})},T=function(){return O},E=function(){return D},R=function(){return j.original},D=[],S=[],V=!1,F=0,O=r,j={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(t)==="[object Object]"?O=t:(t||typeof t=="string")&&b(t),O=rt({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},O);var l=ho(O.background);document.addEventListener("click",i),document.addEventListener("keyup",m),document.addEventListener("scroll",c),window.addEventListener("resize",N);var s={open:z,close:N,toggle:M,update:u,clone:g,attach:b,detach:I,on:x,off:C,getOptions:T,getImages:E,getZoomedImage:R};return s};function vo(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(typeof document>"u")){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",r==="top"&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var xo=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";vo(xo);const Gn=e=>B.createElement("img",e,e.children);var wo=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],At=e=>{let t=0;for(let r=0;r<e.length;r++){let o=e[r],i=wo.indexOf(o);t=t*83+i}return t},Qt=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},en=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.trunc(t*12.92*255+.5):Math.trunc((1.055*Math.pow(t,.4166666666666667)-.055)*255+.5)},yo=e=>e<0?-1:1,tn=(e,t)=>yo(e)*Math.pow(Math.abs(e),t),Tn=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},bo=e=>{if(!e||e.length<6)throw new Tn("The blurhash string must be at least 6 characters");let t=At(e[0]),r=Math.floor(t/9)+1,o=t%9+1;if(e.length!==4+2*o*r)throw new Tn(`blurhash length mismatch: length is ${e.length} but it should be ${4+2*o*r}`)},So=e=>{let t=e>>16,r=e>>8&255,o=e&255;return[Qt(t),Qt(r),Qt(o)]},Co=(e,t)=>{let r=Math.floor(e/361),o=Math.floor(e/19)%19,i=e%19;return[tn((r-9)/9,2)*t,tn((o-9)/9,2)*t,tn((i-9)/9,2)*t]},Po=(e,t,r,o)=>{bo(e),o=o|1;let i=At(e[0]),c=Math.floor(i/9)+1,m=i%9+1,u=(At(e[1])+1)/166,g=new Array(m*c);for(let x=0;x<g.length;x++)if(x===0){let C=At(e.substring(2,6));g[x]=So(C)}else{let C=At(e.substring(4+x*2,6+x*2));g[x]=Co(C,u*o)}let b=t*4,I=new Uint8ClampedArray(b*r);for(let x=0;x<r;x++)for(let C=0;C<t;C++){let z=0,N=0,M=0;for(let D=0;D<c;D++)for(let S=0;S<m;S++){let V=Math.cos(Math.PI*C*S/t)*Math.cos(Math.PI*x*D/r),F=g[S+D*m];z+=F[0]*V,N+=F[1]*V,M+=F[2]*V}let T=en(z),E=en(N),R=en(M);I[4*C+0+x*b]=T,I[4*C+1+x*b]=E,I[4*C+2+x*b]=R,I[4*C+3+x*b]=255}return I},Eo=Po,Io=Object.defineProperty,jo=Object.defineProperties,Ro=Object.getOwnPropertyDescriptors,Gt=Object.getOwnPropertySymbols,$n=Object.prototype.hasOwnProperty,qn=Object.prototype.propertyIsEnumerable,Mn=(e,t,r)=>t in e?Io(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ln=(e,t)=>{for(var r in t||(t={}))$n.call(t,r)&&Mn(e,r,t[r]);if(Gt)for(var r of Gt(t))qn.call(t,r)&&Mn(e,r,t[r]);return e},cn=(e,t)=>jo(e,Ro(t)),Kn=(e,t)=>{var r={};for(var o in e)$n.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&Gt)for(var o of Gt(e))t.indexOf(o)<0&&qn.call(e,o)&&(r[o]=e[o]);return r},Jn=class extends d.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:t,punch:r,width:o}=this.props;if(this.canvas){let i=Eo(e,o,t,r),c=this.canvas.getContext("2d"),m=c.createImageData(o,t);m.data.set(i),c.putImageData(m,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:t,height:r,width:o}=e,i=Kn(e,["hash","height","width"]);return d.createElement("canvas",cn(ln({},i),{height:r,width:o,ref:this.handleRef}))}};Jn.defaultProps={height:128,width:128};var Ao={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},xn=class extends d.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:t,height:r,width:o,punch:i,resolutionX:c,resolutionY:m,style:u}=e,g=Kn(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return d.createElement("div",cn(ln({},g),{style:cn(ln({display:"inline-block",height:r,width:o},u),{position:"relative"})}),d.createElement(Jn,{hash:t,height:m,width:c,punch:i,style:Ao}))}};xn.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const To="_loaded_hef56_6",zn={loaded:To};function Mo(e){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:a.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12a9 9 0 1 0 18 0a9 9 0 1 0-18 0m.6 3h10.55M6.551 4.938l3.26 10.034m7.221-10.336l-8.535 6.201m12.062 3.673l-8.535-6.201m.233 12.607l3.261-10.034"})})}function zo(e){return a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32",...e,children:[a.jsx("path",{fill:"currentColor",d:"M24 21h-3a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2m-3-8v6h3v-6zm-6 8h-5v-2h5v-2h-3a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h5v2h-5v2h3a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2M6 11h2v10H6z"}),a.jsx("path",{fill:"currentColor",d:"M28 6H4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2M4 24V8h24v16Z"})]})}function Do(e){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:a.jsx("path",{fill:"currentColor",d:"M9 3V1h6v2zm3 19q-1.875 0-3.512-.712T5.625 19.35T3.7 16.487T3 13t.713-3.488T5.65 6.65t2.863-1.937T12 4q1.575 0 3 .525T17.6 6l1.45-1.45l1.4 1.4l-1.4 1.45q.9 1.175 1.425 2.6T21 13q0 1.85-.7 3.488t-1.925 2.862t-2.863 1.938T12 22m0-2q2.925 0 4.963-2.037T19 13t-2.037-4.962T12 6T7.038 8.038T5 13t2.038 4.963T12 20m0-9h5.65q-.45-1.275-1.4-2.238T14.1 7.375zm-1.725 1L13.1 7.1q-1.275-.25-2.562.075t-2.363 1.2zM6.1 14h4.175L7.45 9.1q-.875.975-1.225 2.263T6.1 14m3.8 4.625L12 15H6.35q.425 1.25 1.388 2.225t2.162 1.4m1 .275q1.425.275 2.725-.112t2.2-1.163L13.725 14zm5.65-2q.9-1.025 1.238-2.287T17.9 12h-4.175z"})})}function Dn(e){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 14 14",...e,children:a.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"7",cy:"7",r:"6.5"}),a.jsx("circle",{cx:"7",cy:"7",r:"2.5"}),a.jsx("path",{d:"M4.5 7V1M7 4.5h6M9.5 7v6M7 9.5H1"})]})})}function No(e){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:a.jsx("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14V5zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2zM6 8.5h5V7H6z"})})}const wn=Or({base:"rounded-xl overflow-hidden text-center inline-flex items-center justify-center duration-200",variants:{status:{loading:"hidden opacity-0",loaded:"opacity-100 block",error:"hidden opacity-0"}}});let nn;const ko=({alt:e,src:t,title:r,zoom:o,placeholder:i,height:c,width:m,className:u,onClick:g,ref:b})=>{const[I]=d.useState(()=>{if(Fr)return null;if(nn)return nn;const F=po(void 0,{});return nn=F,F}),x=r||e,[C,z]=d.useState("loading"),N=_r(),M=d.useCallback(F=>{N.current||z(F)},[N]),T=d.useRef(null);d.useImperativeHandle(b,()=>T.current);const E=Lr();pn(()=>{if(C!=="loaded"||!o)return;const F=T.current;if(F&&!g){if(E)return F.onclick=()=>{window.open(t)},()=>{F.onclick=null};if(F)return I.attach(F),()=>{I.detach(F)}}},[o,I,C,E,g]);const R=d.useCallback(()=>{M("loaded")},[M]),D=d.useCallback(()=>M("error"),[M]),S=d.useCallback(F=>{F.target.classList.remove(zn.loaded)},[]),V=d.useMemo(()=>wn({status:C,className:at(zn.loaded,u)}),[u,C]);return a.jsxs("figure",{children:[a.jsx("span",{className:"group/image relative flex justify-center overflow-hidden","data-hide-print":!0,children:a.jsxs(_n,{placeholder:i,offset:30,children:[a.jsx("span",{children:C!=="loaded"&&i}),C==="error"&&a.jsxs("div",{className:"center absolute inset-0 z-[1] flex flex-col gap-8",children:[a.jsx("i",{className:"i-mingcute-close-line text-4xl text-red-500"}),a.jsx("span",{children:"图片加载失败"}),a.jsx(an,{className:"w-[80px] opacity-80"}),a.jsx("a",{href:t,target:"_blank",rel:"noreferrer",children:a.jsx("span",{children:"查看原图"})})]}),a.jsx(Qn,{onClick:g,height:c,width:m,src:t,title:r,alt:e||r||"",ref:T,onLoad:R,onError:D,className:V,onAnimationEnd:S})]})}),a.jsx("img",{className:"!hidden print:!block",src:t,alt:e||r}),!!x&&a.jsxs("figcaption",{className:"mt-1 flex flex-col items-center justify-center",children:[a.jsx(an,{className:"w-[80px] opacity-80"}),a.jsx("span",{children:x})]})]})},Zn=({ref:e,...t})=>{const r=d.useMemo(()=>a.jsx(Fo,{...t}),[t]);return a.jsx(ko,{zoom:!0,placeholder:r,...t,ref:e})},Fo=({src:e,containerWidth:t,height:r,width:o,accent:i})=>{const c=zt(e),m=i||c?.accent,u=d.useMemo(()=>{let g=r,b=o;if(!g||!b){if(!c)return;g=c.height,b=c.width}if(t<=0)return;const{height:I,width:x}=Rr({width:b,height:g,max:{width:t,height:1/0}});return{scaleHeight:I,scaleWidth:x}},[r,o,t,c]);return u?a.jsx("span",{className:`image-placeholder relative ${wn.base}`,"data-width":u.scaleWidth,"data-height":u.scaleHeight,"data-from-record-height":c?.height,"data-from-record-width":c?.width,"data-src":e,style:{height:u.scaleHeight,width:u.scaleWidth,backgroundColor:m},children:c?.blurHash&&a.jsx(xn,{resolutionX:32,resolutionY:32,punch:1,height:u.scaleHeight,width:u.scaleWidth,hash:c.blurHash})}):a.jsx(Lo,{accent:m})},Lo=({accent:e})=>a.jsx("span",{className:Ie("image-placeholder",wn.base,"h-[300px] w-full bg-slate-300 dark:bg-slate-700"),style:{backgroundColor:e,outline:void 0}}),Qn=d.memo(({ref:e,src:t,alt:r,onClick:o,...i})=>{const{height:c,width:m}=zt(t)||i,u=t.endsWith(".gif"),g=!!(c&&m)&&!u,b=d.useRef(null),I=a.jsx("img",{onClick:o,"data-zoom-src":t,alt:r,src:t,ref:b,...i});d.useImperativeHandle(e,()=>b.current);const x=d.useRef(null),[C,z]=d.useState(null);return pn(()=>{const N=x.current;N&&b.current&&(b.current.src=N.src)},[t]),d.useEffect(()=>{(async()=>{const M=new window.Image;M.src=t,M.onload=()=>{try{he.getData(M,function(){const T=he.getTag(this,"ExposureTime"),E={dateTime:he.getTag(this,"DateTime"),aperture:he.getTag(this,"FNumber")?`f/${he.getTag(this,"FNumber").numerator/he.getTag(this,"FNumber").denominator}`:void 0,iso:he.getTag(this,"ISOSpeedRatings"),exposureTime:T?.numerator&&T?.denominator?`${T.numerator}/${T.denominator}`:void 0,focalLength:(()=>{const R=he.getTag(this,"FocalLength");if(R?.numerator&&R?.denominator)return`${Math.round(R.numerator/R.denominator)}mm`})(),equivalent35mmFocalLength:(()=>{const R=he.getTag(this,"FocalLengthIn35mmFilm");if(R)return`${R}mm (等效)`})(),exposureCompensation:(()=>{const R=he.getTag(this,"ExposureBias");if(typeof R=="number"&&R!==0)return R.toString()})(),device:(()=>{const R=he.getTag(this,"Make"),D=he.getTag(this,"Model");if(R&&D)return`${R} ${D}`;if(R)return R;if(D)return D})()};(E.dateTime||E.aperture||E.device||E.focalLength||E.equivalent35mmFocalLength||E.exposureCompensation)&&z(E)})}catch(T){console.error("Failed to extract EXIF data:",T)}}})()},[t,u]),a.jsxs(a.Fragment,{children:[g?a.jsxs(a.Fragment,{children:[a.jsx(Gn,{alt:r||"",fetchPriority:"high",priority:!0,src:t,...i,height:+c,width:+m,ref:x}),a.jsx("div",{className:"absolute inset-0 flex justify-center opacity-0",children:d.cloneElement(I,{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"})})]}):a.jsx(a.Fragment,{children:I}),C&&a.jsx("div",{className:"not-prose absolute inset-x-0 bottom-0 translate-y-full rounded-b-xl bg-gradient-to-b from-black/30 to-black/60 p-4 font-sans opacity-0 backdrop-blur-[70px] transition-all duration-300 group-hover/image:translate-y-0 group-hover/image:opacity-100",children:a.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[C.device&&a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5",children:[a.jsx("i",{className:"i-mingcute-camera-line text-white/80"}),a.jsx("span",{className:"text-sm font-medium tracking-wide text-white/90",children:C.device})]}),C.aperture&&a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5",children:[a.jsx(Mo,{className:"size-4"}),a.jsx("span",{className:"text-sm font-medium tracking-wide text-white/90",children:C.aperture})]}),C.iso&&a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5",children:[a.jsx(zo,{className:"size-4"}),a.jsxs("span",{className:"text-sm font-medium tracking-wide text-white/90",children:["ISO ",C.iso]})]}),C.exposureTime&&a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5",children:[a.jsx(Do,{className:"size-4"}),a.jsxs("span",{className:"text-sm font-medium tracking-wide text-white/90",children:[C.exposureTime,"s"]})]}),C.equivalent35mmFocalLength?a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5",children:[a.jsx(Dn,{className:"size-4"}),a.jsx("span",{className:"text-sm font-medium tracking-wide text-white/90",children:C.equivalent35mmFocalLength})]}):C.focalLength&&a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5",children:[a.jsx(Dn,{className:"size-4"}),a.jsx("span",{className:"text-sm font-medium tracking-wide text-white/90",children:C.focalLength})]}),C.exposureCompensation&&a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5",children:[a.jsx(No,{className:"size-4"}),a.jsxs("span",{className:"text-sm font-medium tracking-wide text-white/90",children:[C.exposureCompensation," EV"]})]}),C.dateTime&&a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5",children:[a.jsx("i",{className:"i-mingcute-time-line text-white/80"}),a.jsx("span",{className:"text-sm font-medium tracking-wide text-white/90",children:C.dateTime.replaceAll(":","-").slice(0,10)})]})]})})]})});Qn.displayName="OptimizedImage";function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},K.apply(null,arguments)}function Kt(e,t){if(e==null)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.includes(o))continue;r[o]=e[o]}return r}function st(e){var t=d.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var r=Object.create(null);Object.keys(e).forEach(function(o){r[o]=function(){var i;return(i=t.fn[o]).call.apply(i,[t.fn].concat([].slice.call(arguments)))}}),t.curr=r}return t.curr}function $t(e){return d.useReducer(function(t,r){return K({},t,typeof r=="function"?r(t):r)},e)}var er=d.createContext(void 0),Nn="cubic-bezier(0.25, 0.8, 0.25, 1)",vt=20,_e=typeof window<"u"&&"ontouchstart"in window,un=function(e,t,r){return Math.max(Math.min(e,r),t)},Ht=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=0),un(e,1*(1-r),Math.max(6,t)*(1+r))},dn=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?d.useEffect:d.useLayoutEffect;function xt(e,t,r){var o=d.useRef(t);o.current=t,d.useEffect(function(){function i(c){o.current(c)}return e&&window.addEventListener(e,i,r),function(){e&&window.removeEventListener(e,i)}},[e])}var Oo=["container"];function _o(e){var t=e.container,r=t===void 0?document.body:t,o=Kt(e,Oo);return jr.createPortal(B.createElement("div",K({},o)),r)}function Vo(e){return B.createElement("svg",K({width:"44",height:"44",viewBox:"0 0 768 768"},e),B.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function Bo(e){return B.createElement("svg",K({width:"44",height:"44",viewBox:"0 0 768 768"},e),B.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function Ho(e){return B.createElement("svg",K({width:"44",height:"44",viewBox:"0 0 768 768"},e),B.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function Uo(){return d.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function kn(e){var t=e.touches[0],r=t.clientX,o=t.clientY;if(e.touches.length>=2){var i=e.touches[1],c=i.clientX,m=i.clientY;return[(r+c)/2,(o+m)/2,Math.sqrt(Math.pow(c-r,2)+Math.pow(m-o,2))]}return[r,o,0]}var $e=function(e,t,r,o){var i,c=r*t,m=(c-o)/2,u=e;return c<=o?(i=1,u=0):e>0&&m-e<=0?(i=2,u=m):e<0&&m+e<=0&&(i=3,u=-m),[i,u]};function rn(e,t,r,o,i,c,m,u,g,b){m===void 0&&(m=innerWidth/2),u===void 0&&(u=innerHeight/2),g===void 0&&(g=0),b===void 0&&(b=0);var I=$e(e,c,r,innerWidth)[0],x=$e(t,c,o,innerHeight),C=innerWidth/2,z=innerHeight/2;return{x:m-c/i*(m-(C+e))-C+(o/r>=3&&r*c===innerWidth?0:I?g/2:g),y:u-c/i*(u-(z+t))-z+(x[0]?b/2:b),lastCX:m,lastCY:u}}function mn(e,t,r){var o=e%180!=0;return o?[r,t,o]:[t,r,o]}function on(e,t,r){var o=mn(r,innerWidth,innerHeight),i=o[0],c=o[1],m=0,u=i,g=c,b=e/t*c,I=t/e*i;return e<i&&t<c?(u=e,g=t):e<i&&t>=c?u=b:e>=i&&t<c||e/t>i/c?g=I:t/e>=3&&!o[2]?m=((g=I)-c)/2:u=b,{width:u,height:g,x:0,y:m,pause:!0}}function Ut(e,t){var r=t.leading,o=r!==void 0&&r,i=t.maxWait,c=t.wait,m=c===void 0?i||0:c,u=d.useRef(e);u.current=e;var g=d.useRef(0),b=d.useRef(),I=function(){return b.current&&clearTimeout(b.current)},x=d.useCallback(function(){var C=[].slice.call(arguments),z=Date.now();function N(){g.current=z,I(),u.current.apply(null,C)}var M=g.current,T=z-M;if(M===0&&(o&&N(),g.current=z),i!==void 0){if(T>i)return void N()}else T<m&&(g.current=z);I(),b.current=setTimeout(function(){N(),g.current=0},m)},[m,i,o]);return x.cancel=I,x}var Fn=function(e,t,r){return ot(e,t,r,100,function(o){return o},function(){return ot(t,e,r)})},Wo=function(e){return 1-Math.pow(1-e,4)};function ot(e,t,r,o,i,c){o===void 0&&(o=400),i===void 0&&(i=Wo);var m=t-e;if(m!==0){var u=Date.now(),g=0,b=function(){var x=Math.min(1,(Date.now()-u)/o);r(e+i(x)*m)&&x<1?I():(cancelAnimationFrame(g),x>=1&&c&&c())};I()}function I(){g=requestAnimationFrame(b)}}var Xo={T:0,L:0,W:0,H:0,FIT:void 0},tr=function(){var e=d.useRef(!1);return d.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},Yo=["className"];function Go(e){var t=e.className,r=t===void 0?"":t,o=Kt(e,Yo);return B.createElement("div",K({className:"PhotoView__Spinner "+r},o),B.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},B.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),B.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var $o=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function qo(e){var t=e.src,r=e.loaded,o=e.broken,i=e.className,c=e.onPhotoLoad,m=e.loadingElement,u=e.brokenElement,g=Kt(e,$o),b=tr();return t&&!o?B.createElement(B.Fragment,null,B.createElement("img",K({className:"PhotoView__Photo"+(i?" "+i:""),src:t,onLoad:function(I){var x=I.target;b.current&&c({loaded:!0,naturalWidth:x.naturalWidth,naturalHeight:x.naturalHeight})},onError:function(){b.current&&c({broken:!0})},draggable:!1,alt:""},g)),!r&&(m?B.createElement("span",{className:"PhotoView__icon"},m):B.createElement(Go,{className:"PhotoView__icon"}))):u?B.createElement("span",{className:"PhotoView__icon"},typeof u=="function"?u({src:t}):u):null}var Ko={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function Jo(e){var t=e.item,r=t.src,o=t.render,i=t.width,c=i===void 0?0:i,m=t.height,u=m===void 0?0:m,g=t.originRef,b=e.visible,I=e.speed,x=e.easing,C=e.wrapClassName,z=e.className,N=e.style,M=e.loadingElement,T=e.brokenElement,E=e.onPhotoTap,R=e.onMaskTap,D=e.onReachMove,S=e.onReachUp,V=e.onPhotoResize,F=e.isActive,O=e.expose,j=$t(Ko),l=j[0],s=j[1],h=d.useRef(0),p=tr(),f=l.naturalWidth,P=f===void 0?c:f,w=l.naturalHeight,v=w===void 0?u:w,k=l.width,A=k===void 0?c:k,Y=l.height,L=Y===void 0?u:Y,J=l.loaded,te=J===void 0?!r:J,je=l.broken,ne=l.x,Z=l.y,re=l.touched,bt=l.stopRaf,oe=l.maskTouched,ae=l.rotate,$=l.scale,Ve=l.CX,we=l.CY,Re=l.lastX,Je=l.lastY,W=l.lastCX,lt=l.lastCY,ce=l.lastScale,ye=l.touchTime,Dt=l.touchLength,ge=l.pause,Ze=l.reach,St=st({onScale:function(y){return Ae(Ht(y))},onRotate:function(y){ae!==y&&(O({rotate:y}),s(K({rotate:y},on(P,v,y))))}});function Ae(y,_,U){$!==y&&(O({scale:y}),s(K({scale:y},rn(ne,Z,A,L,$,y,_,U),y<=1&&{x:0,y:0})))}var Nt=Ut(function(y,_,U){if(U===void 0&&(U=0),(re||oe)&&F){var Te=mn(ae,A,L),Me=Te[0],ue=Te[1];if(U===0&&h.current===0){var se=Math.abs(y-Ve)<=20,le=Math.abs(_-we)<=20;if(se&&le)return void s({lastCX:y,lastCY:_});h.current=se?_>we?3:2:1}var Ce,Qe=y-W,Ue=_-lt;if(U===0){var et=$e(Qe+Re,$,Me,innerWidth)[0],dt=$e(Ue+Je,$,ue,innerHeight);Ce=function(We,De,Ne,Pe){return De&&We===1||Pe==="x"?"x":Ne&&We>1||Pe==="y"?"y":void 0}(h.current,et,dt[0],Ze),Ce!==void 0&&D(Ce,y,_,$)}if(Ce==="x"||oe)return void s({reach:"x"});var ze=Ht($+(U-Dt)/100/2*$,P/A,.2);O({scale:ze}),s(K({touchLength:U,reach:Ce,scale:ze},rn(ne,Z,A,L,$,ze,y,_,Qe,Ue)))}},{maxWait:8});function Ct(y){return!bt&&!re&&(p.current&&s(K({},y,{pause:b})),p.current)}var Be,be,He,Pt,kt,Ft,Lt,ie,Ot=(kt=function(y){return Ct({x:y})},Ft=function(y){return Ct({y})},Lt=function(y){return p.current&&(O({scale:y}),s({scale:y})),!re&&p.current},ie=st({X:function(y){return kt(y)},Y:function(y){return Ft(y)},S:function(y){return Lt(y)}}),function(y,_,U,Te,Me,ue,se,le,Ce,Qe,Ue){var et=mn(Qe,Me,ue),dt=et[0],ze=et[1],We=$e(y,le,dt,innerWidth),De=We[0],Ne=We[1],Pe=$e(_,le,ze,innerHeight),mt=Pe[0],Vt=Pe[1],ft=Date.now()-Ue;if(ft>=200||le!==se||Math.abs(Ce-se)>1){var Xe=rn(y,_,Me,ue,se,le),ke=Xe.x,tt=Xe.y,de=De?Ne:ke!==y?ke:null,ht=mt?Vt:tt!==_?tt:null;return de!==null&&ot(y,de,ie.X),ht!==null&&ot(_,ht,ie.Y),void(le!==se&&ot(se,le,ie.S))}var nt=(y-U)/ft,Ye=(_-Te)/ft,Ge=Math.sqrt(Math.pow(nt,2)+Math.pow(Ye,2)),Fe=!1,Le=!1;(function(pe,Q){var ee,ve=pe,Oe=0,me=0,gt=function(It){ee||(ee=It);var jt=It-ee,Sn=Math.sign(pe),Cn=-.001*Sn,Pn=Math.sign(-ve)*Math.pow(ve,2)*2e-4,Er=ve*jt+(Cn+Pn)*Math.pow(jt,2)/2;Oe+=Er,ee=It,Sn*(ve+=(Cn+Pn)*jt)<=0?fe():Q(Oe)?Ee():fe()};function Ee(){me=requestAnimationFrame(gt)}function fe(){cancelAnimationFrame(me)}Ee()})(Ge,function(pe){var Q=y+pe*(nt/Ge),ee=_+pe*(Ye/Ge),ve=$e(Q,se,dt,innerWidth),Oe=ve[0],me=ve[1],gt=$e(ee,se,ze,innerHeight),Ee=gt[0],fe=gt[1];if(Oe&&!Fe&&(Fe=!0,De?ot(Q,me,ie.X):Fn(me,Q+(Q-me),ie.X)),Ee&&!Le&&(Le=!0,mt?ot(ee,fe,ie.Y):Fn(fe,ee+(ee-fe),ie.Y)),Fe&&Le)return!1;var It=Fe||ie.X(me),jt=Le||ie.Y(fe);return It&&jt})}),ct=(Be=E,be=function(y,_){Ze||Ae($!==1?1:Math.max(2,P/A),y,_)},He=d.useRef(0),Pt=Ut(function(){He.current=0,Be.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var y=[].slice.call(arguments);He.current+=1,Pt.apply(void 0,y),He.current>=2&&(Pt.cancel(),He.current=0,be.apply(void 0,y))});function ut(y,_){if(h.current=0,(re||oe)&&F){s({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var U=Ht($,P/A);if(Ot(ne,Z,Re,Je,A,L,$,U,ce,ae,ye),S(y,_),Ve===y&&we===_){if(re)return void ct(y,_);oe&&R(y,_)}}}function Et(y,_,U){U===void 0&&(U=0),s({touched:!0,CX:y,CY:_,lastCX:y,lastCY:_,lastX:ne,lastY:Z,lastScale:$,touchLength:U,touchTime:Date.now()})}function _t(y){s({maskTouched:!0,CX:y.clientX,CY:y.clientY,lastX:ne,lastY:Z})}xt(_e?void 0:"mousemove",function(y){y.preventDefault(),Nt(y.clientX,y.clientY)}),xt(_e?void 0:"mouseup",function(y){ut(y.clientX,y.clientY)}),xt(_e?"touchmove":void 0,function(y){y.preventDefault();var _=kn(y);Nt.apply(void 0,_)},{passive:!1}),xt(_e?"touchend":void 0,function(y){var _=y.changedTouches[0];ut(_.clientX,_.clientY)},{passive:!1}),xt("resize",Ut(function(){te&&!re&&(s(on(P,v,ae)),V())},{maxWait:8})),dn(function(){F&&O(K({scale:$,rotate:ae},St))},[F]);var Se=function(y,_,U,Te,Me,ue,se,le,Ce,Qe){var Ue=function(ke,tt,de,ht,nt){var Ye=d.useRef(!1),Ge=$t({lead:!0,scale:de}),Fe=Ge[0],Le=Fe.lead,pe=Fe.scale,Q=Ge[1],ee=Ut(function(ve){try{return nt(!0),Q({lead:!1,scale:ve}),Promise.resolve()}catch(Oe){return Promise.reject(Oe)}},{wait:ht});return dn(function(){Ye.current?(nt(!1),Q({lead:!0}),ee(de)):Ye.current=!0},[de]),Le?[ke*pe,tt*pe,de/pe]:[ke*de,tt*de,1]}(ue,se,le,Ce,Qe),et=Ue[0],dt=Ue[1],ze=Ue[2],We=function(ke,tt,de,ht,nt){var Ye=d.useState(Xo),Ge=Ye[0],Fe=Ye[1],Le=d.useState(0),pe=Le[0],Q=Le[1],ee=d.useRef(),ve=st({OK:function(){return ke&&Q(4)}});function Oe(me){nt(!1),Q(me)}return d.useEffect(function(){if(ee.current||(ee.current=Date.now()),de){if(function(me,gt){var Ee=me&&me.current;if(Ee&&Ee.nodeType===1){var fe=Ee.getBoundingClientRect();gt({T:fe.top,L:fe.left,W:fe.width,H:fe.height,FIT:Ee.tagName==="IMG"?getComputedStyle(Ee).objectFit:void 0})}}(tt,Fe),ke)return Date.now()-ee.current<250?(Q(1),requestAnimationFrame(function(){Q(2),requestAnimationFrame(function(){return Oe(3)})}),void setTimeout(ve.OK,ht)):void Q(4);Oe(5)}},[ke,de]),[pe,Ge]}(y,_,U,Ce,Qe),De=We[0],Ne=We[1],Pe=Ne.W,mt=Ne.FIT,Vt=innerWidth/2,ft=innerHeight/2,Xe=De<3||De>4;return[Xe?Pe?Ne.L:Vt:Te+(Vt-ue*le/2),Xe?Pe?Ne.T:ft:Me+(ft-se*le/2),et,Xe&&mt?et*(Ne.H/Pe):dt,De===0?ze:Xe?Pe/(ue*le)||.01:ze,Xe?mt?1:0:1,De,mt]}(b,g,te,ne,Z,A,L,$,I,function(y){return s({pause:y})}),H=Se[4],X=Se[6],q="transform "+I+"ms "+x,G={className:z,onMouseDown:_e?void 0:function(y){y.stopPropagation(),y.button===0&&Et(y.clientX,y.clientY,0)},onTouchStart:_e?function(y){y.stopPropagation(),Et.apply(void 0,kn(y))}:void 0,onWheel:function(y){if(!Ze){var _=Ht($-y.deltaY/100/2,P/A);s({stopRaf:!0}),Ae(_,y.clientX,y.clientY)}},style:{width:Se[2]+"px",height:Se[3]+"px",opacity:Se[5],objectFit:X===4?void 0:Se[7],transform:ae?"rotate("+ae+"deg)":void 0,transition:X>2?q+", opacity "+I+"ms ease, height "+(X<4?I/2:X>4?I:0)+"ms "+x:void 0}};return B.createElement("div",{className:"PhotoView__PhotoWrap"+(C?" "+C:""),style:N,onMouseDown:!_e&&F?_t:void 0,onTouchStart:_e&&F?function(y){return _t(y.touches[0])}:void 0},B.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+H+", 0, 0, "+H+", "+Se[0]+", "+Se[1]+")",transition:re||ge?void 0:q,willChange:F?"transform":void 0}},r?B.createElement(qo,K({src:r,loaded:te,broken:je},G,{onPhotoLoad:function(y){s(K({},y,y.loaded&&on(y.naturalWidth||0,y.naturalHeight||0,ae)))},loadingElement:M,brokenElement:T})):o&&o({attrs:G,scale:H,rotate:ae})))}var Ln={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function Zo(e){var t=e.loop,r=t===void 0?3:t,o=e.speed,i=e.easing,c=e.photoClosable,m=e.maskClosable,u=m===void 0||m,g=e.maskOpacity,b=g===void 0?1:g,I=e.pullClosable,x=I===void 0||I,C=e.bannerVisible,z=C===void 0||C,N=e.overlayRender,M=e.toolbarRender,T=e.className,E=e.maskClassName,R=e.photoClassName,D=e.photoWrapClassName,S=e.loadingElement,V=e.brokenElement,F=e.images,O=e.index,j=O===void 0?0:O,l=e.onIndexChange,s=e.visible,h=e.onClose,p=e.afterClose,f=e.portalContainer,P=$t(Ln),w=P[0],v=P[1],k=d.useState(0),A=k[0],Y=k[1],L=w.x,J=w.touched,te=w.pause,je=w.lastCX,ne=w.lastCY,Z=w.bg,re=Z===void 0?b:Z,bt=w.lastBg,oe=w.overlay,ae=w.minimal,$=w.scale,Ve=w.rotate,we=w.onScale,Re=w.onRotate,Je=e.hasOwnProperty("index"),W=Je?j:A,lt=Je?l:Y,ce=d.useRef(W),ye=F.length,Dt=F[W],ge=typeof r=="boolean"?r:ye>r,Ze=function(H,X){var q=d.useReducer(function(U){return!U},!1)[1],G=d.useRef(0),y=function(U){var Te=d.useRef(U);function Me(ue){Te.current=ue}return d.useMemo(function(){(function(ue){H?(ue(H),G.current=1):G.current=2})(Me)},[U]),[Te.current,Me]}(H),_=y[1];return[y[0],G.current,function(){q(),G.current===2&&(_(!1),X&&X()),G.current=0}]}(s,p),St=Ze[0],Ae=Ze[1],Nt=Ze[2];dn(function(){if(St)return v({pause:!0,x:W*-(innerWidth+vt)}),void(ce.current=W);v(Ln)},[St]);var Ct=st({close:function(H){Re&&Re(0),v({overlay:!0,lastBg:re}),h(H)},changeIndex:function(H,X){X===void 0&&(X=!1);var q=ge?ce.current+(H-W):H,G=ye-1,y=un(q,0,G),_=ge?q:y,U=innerWidth+vt;v({touched:!1,lastCX:void 0,lastCY:void 0,x:-U*_,pause:X}),ce.current=_,lt&&lt(ge?H<0?G:H>G?0:H:y)}}),Be=Ct.close,be=Ct.changeIndex;function He(H){return H?Be():v({overlay:!oe})}function Pt(){v({x:-(innerWidth+vt)*W,lastCX:void 0,lastCY:void 0,pause:!0}),ce.current=W}function kt(H,X,q,G){H==="x"?function(y){if(je!==void 0){var _=y-je,U=_;!ge&&(W===0&&_>0||W===ye-1&&_<0)&&(U=_/2),v({touched:!0,lastCX:je,x:-(innerWidth+vt)*ce.current+U,pause:!1})}else v({touched:!0,lastCX:y,x:L,pause:!1})}(X):H==="y"&&function(y,_){if(ne!==void 0){var U=b===null?null:un(b,.01,b-Math.abs(y-ne)/100/4);v({touched:!0,lastCY:ne,bg:_===1?U:b,minimal:_===1})}else v({touched:!0,lastCY:y,bg:re,minimal:!0})}(q,G)}function Ft(H,X){var q=H-(je??H),G=X-(ne??X),y=!1;if(q<-40)be(W+1);else if(q>40)be(W-1);else{var _=-(innerWidth+vt)*ce.current;Math.abs(G)>100&&ae&&x&&(y=!0,Be()),v({touched:!1,x:_,lastCX:void 0,lastCY:void 0,bg:b,overlay:!!y||oe})}}xt("keydown",function(H){if(s)switch(H.key){case"ArrowLeft":be(W-1,!0);break;case"ArrowRight":be(W+1,!0);break;case"Escape":Be()}});var Lt=function(H,X,q){return d.useMemo(function(){var G=H.length;return q?H.concat(H).concat(H).slice(G+X-1,G+X+2):H.slice(Math.max(X-1,0),Math.min(X+2,G+1))},[H,X,q])}(F,W,ge);if(!St)return null;var ie=oe&&!Ae,Ot=s?re:bt,ct=we&&Re&&{images:F,index:W,visible:s,onClose:Be,onIndexChange:be,overlayVisible:ie,overlay:Dt&&Dt.overlay,scale:$,rotate:Ve,onScale:we,onRotate:Re},ut=o?o(Ae):400,Et=i?i(Ae):Nn,_t=o?o(3):600,Se=i?i(3):Nn;return B.createElement(_o,{className:"PhotoView-Portal"+(ie?"":" PhotoView-Slider__clean")+(s?"":" PhotoView-Slider__willClose")+(T?" "+T:""),role:"dialog",onClick:function(H){return H.stopPropagation()},container:f},s&&B.createElement(Uo,null),B.createElement("div",{className:"PhotoView-Slider__Backdrop"+(E?" "+E:"")+(Ae===1?" PhotoView-Slider__fadeIn":Ae===2?" PhotoView-Slider__fadeOut":""),style:{background:Ot?"rgba(0, 0, 0, "+Ot+")":void 0,transitionTimingFunction:Et,transitionDuration:(J?0:ut)+"ms",animationDuration:ut+"ms"},onAnimationEnd:Nt}),z&&B.createElement("div",{className:"PhotoView-Slider__BannerWrap"},B.createElement("div",{className:"PhotoView-Slider__Counter"},W+1," / ",ye),B.createElement("div",{className:"PhotoView-Slider__BannerRight"},M&&ct&&M(ct),B.createElement(Vo,{className:"PhotoView-Slider__toolbarIcon",onClick:Be}))),Lt.map(function(H,X){var q=ge||W!==0?ce.current-1+X:W+X;return B.createElement(Jo,{key:ge?H.key+"/"+H.src+"/"+q:H.key,item:H,speed:ut,easing:Et,visible:s,onReachMove:kt,onReachUp:Ft,onPhotoTap:function(){return He(c)},onMaskTap:function(){return He(u)},wrapClassName:D,className:R,style:{left:(innerWidth+vt)*q+"px",transform:"translate3d("+L+"px, 0px, 0)",transition:J||te?void 0:"transform "+_t+"ms "+Se},loadingElement:S,brokenElement:V,onPhotoResize:Pt,isActive:ce.current===q,expose:v})}),!_e&&z&&B.createElement(B.Fragment,null,(ge||W!==0)&&B.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return be(W-1,!0)}},B.createElement(Bo,null)),(ge||W+1<ye)&&B.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return be(W+1,!0)}},B.createElement(Ho,null))),N&&ct&&B.createElement("div",{className:"PhotoView-Slider__Overlay"},N(ct)))}var Qo=["children","onIndexChange","onVisibleChange"],ea={images:[],visible:!1,index:0};function ta(e){var t=e.children,r=e.onIndexChange,o=e.onVisibleChange,i=Kt(e,Qo),c=$t(ea),m=c[0],u=c[1],g=d.useRef(0),b=m.images,I=m.visible,x=m.index,C=st({nextId:function(){return g.current+=1},update:function(M){var T=b.findIndex(function(R){return R.key===M.key});if(T>-1){var E=b.slice();return E.splice(T,1,M),void u({images:E})}u(function(R){return{images:R.images.concat(M)}})},remove:function(M){u(function(T){var E=T.images.filter(function(R){return R.key!==M});return{images:E,index:Math.min(E.length-1,x)}})},show:function(M){var T=b.findIndex(function(E){return E.key===M});u({visible:!0,index:T}),o&&o(!0,T,m)}}),z=st({close:function(){u({visible:!1}),o&&o(!1,x,m)},changeIndex:function(M){u({index:M}),r&&r(M,m)}}),N=d.useMemo(function(){return K({},m,C)},[m,C]);return B.createElement(er.Provider,{value:N},t,B.createElement(Zo,K({images:b,visible:I,index:x,onIndexChange:z.changeIndex,onClose:z.close},i)))}var na=function(e){var t,r,o=e.src,i=e.render,c=e.overlay,m=e.width,u=e.height,g=e.triggers,b=g===void 0?["onClick"]:g,I=e.children,x=d.useContext(er),C=(t=function(){return x.nextId()},(r=d.useRef({sign:!1,fn:void 0}).current).sign||(r.sign=!0,r.fn=t()),r.fn),z=d.useRef(null);d.useImperativeHandle(I?.ref,function(){return z.current}),d.useEffect(function(){return function(){x.remove(C)}},[]);var N=st({render:function(T){return i&&i(T)},show:function(T,E){x.show(C),function(R,D){if(I){var S=I.props[R];S&&S(D)}}(T,E)}}),M=d.useMemo(function(){var T={};return b.forEach(function(E){T[E]=N.show.bind(null,E)}),T},[]);return d.useEffect(function(){x.update({key:C,src:o,originRef:z,render:N.render,overlay:c,width:m,height:u})},[o]),I?d.Children.only(d.cloneElement(I,K({},M,{ref:z}))):null};const ra=new Set(["mp4","webm","ogg","avi","mov","flv","wmv","mkv"]),oa=e=>ra.has(e);function nr(e,[t,r]){return Math.min(r,Math.max(t,e))}var aa=d.createContext(void 0);function ia(e){const t=d.useContext(aa);return e||t||"ltr"}function sa(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function la(e){const[t,r]=d.useState(void 0);return Vr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const c=i[0];let m,u;if("borderBoxSize"in c){const g=c.borderBoxSize,b=Array.isArray(g)?g[0]:g;m=b.inlineSize,u=b.blockSize}else m=e.offsetWidth,u=e.offsetHeight;r({width:m,height:u})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else r(void 0)},[e]),t}function ca(e){const t=e+"CollectionProvider",[r,o]=Hn(t),[i,c]=r(t,{collectionRef:{current:null},itemMap:new Map}),m=M=>{const{scope:T,children:E}=M,R=B.useRef(null),D=B.useRef(new Map).current;return a.jsx(i,{scope:T,itemMap:D,collectionRef:R,children:E})};m.displayName=t;const u=e+"CollectionSlot",g=En(u),b=B.forwardRef((M,T)=>{const{scope:E,children:R}=M,D=c(u,E),S=Ke(T,D.collectionRef);return a.jsx(g,{ref:S,children:R})});b.displayName=u;const I=e+"CollectionItemSlot",x="data-radix-collection-item",C=En(I),z=B.forwardRef((M,T)=>{const{scope:E,children:R,...D}=M,S=B.useRef(null),V=Ke(T,S),F=c(I,E);return B.useEffect(()=>(F.itemMap.set(S,{ref:S,...D}),()=>void F.itemMap.delete(S))),a.jsx(C,{[x]:"",ref:V,children:R})});z.displayName=I;function N(M){const T=c(e+"CollectionConsumer",M);return B.useCallback(()=>{const R=T.collectionRef.current;if(!R)return[];const D=Array.from(R.querySelectorAll(`[${x}]`));return Array.from(T.itemMap.values()).sort((F,O)=>D.indexOf(F.ref.current)-D.indexOf(O.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:m,Slot:b,ItemSlot:z},N,o]}var rr=["PageUp","PageDown"],or=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ar={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},yt="Slider",[fn,ua,da]=ca(yt),[ir,ui]=Hn(yt,[da]),[ma,Jt]=ir(yt),sr=d.forwardRef((e,t)=>{const{name:r,min:o=0,max:i=100,step:c=1,orientation:m="horizontal",disabled:u=!1,minStepsBetweenThumbs:g=0,defaultValue:b=[o],value:I,onValueChange:x=()=>{},onValueCommit:C=()=>{},inverted:z=!1,form:N,...M}=e,T=d.useRef(new Set),E=d.useRef(0),D=m==="horizontal"?fa:ha,[S=[],V]=Br({prop:I,defaultProp:b,onChange:h=>{[...T.current][E.current]?.focus(),x(h)}}),F=d.useRef(S);function O(h){const p=wa(S,h);s(h,p)}function j(h){s(h,E.current)}function l(){const h=F.current[E.current];S[E.current]!==h&&C(S)}function s(h,p,{commit:f}={commit:!1}){const P=Ca(c),w=Pa(Math.round((h-o)/c)*c+o,P),v=nr(w,[o,i]);V((k=[])=>{const A=va(k,v,p);if(Sa(A,g*c)){E.current=A.indexOf(v);const Y=String(A)!==String(k);return Y&&f&&C(A),Y?A:k}else return k})}return a.jsx(ma,{scope:e.__scopeSlider,name:r,disabled:u,min:o,max:i,valueIndexToChangeRef:E,thumbs:T.current,values:S,orientation:m,form:N,children:a.jsx(fn.Provider,{scope:e.__scopeSlider,children:a.jsx(fn.Slot,{scope:e.__scopeSlider,children:a.jsx(D,{"aria-disabled":u,"data-disabled":u?"":void 0,...M,ref:t,onPointerDown:wt(M.onPointerDown,()=>{u||(F.current=S)}),min:o,max:i,inverted:z,onSlideStart:u?void 0:O,onSlideMove:u?void 0:j,onSlideEnd:u?void 0:l,onHomeKeyDown:()=>!u&&s(o,0,{commit:!0}),onEndKeyDown:()=>!u&&s(i,S.length-1,{commit:!0}),onStepKeyDown:({event:h,direction:p})=>{if(!u){const w=rr.includes(h.key)||h.shiftKey&&or.includes(h.key)?10:1,v=E.current,k=S[v],A=c*w*p;s(k+A,v,{commit:!0})}}})})})})});sr.displayName=yt;var[lr,cr]=ir(yt,{startEdge:"left",endEdge:"right",size:"width",direction:1}),fa=d.forwardRef((e,t)=>{const{min:r,max:o,dir:i,inverted:c,onSlideStart:m,onSlideMove:u,onSlideEnd:g,onStepKeyDown:b,...I}=e,[x,C]=d.useState(null),z=Ke(t,D=>C(D)),N=d.useRef(void 0),M=ia(i),T=M==="ltr",E=T&&!c||!T&&c;function R(D){const S=N.current||x.getBoundingClientRect(),V=[0,S.width],O=yn(V,E?[r,o]:[o,r]);return N.current=S,O(D-S.left)}return a.jsx(lr,{scope:e.__scopeSlider,startEdge:E?"left":"right",endEdge:E?"right":"left",direction:E?1:-1,size:"width",children:a.jsx(ur,{dir:M,"data-orientation":"horizontal",...I,ref:z,style:{...I.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:D=>{const S=R(D.clientX);m?.(S)},onSlideMove:D=>{const S=R(D.clientX);u?.(S)},onSlideEnd:()=>{N.current=void 0,g?.()},onStepKeyDown:D=>{const V=ar[E?"from-left":"from-right"].includes(D.key);b?.({event:D,direction:V?-1:1})}})})}),ha=d.forwardRef((e,t)=>{const{min:r,max:o,inverted:i,onSlideStart:c,onSlideMove:m,onSlideEnd:u,onStepKeyDown:g,...b}=e,I=d.useRef(null),x=Ke(t,I),C=d.useRef(void 0),z=!i;function N(M){const T=C.current||I.current.getBoundingClientRect(),E=[0,T.height],D=yn(E,z?[o,r]:[r,o]);return C.current=T,D(M-T.top)}return a.jsx(lr,{scope:e.__scopeSlider,startEdge:z?"bottom":"top",endEdge:z?"top":"bottom",size:"height",direction:z?1:-1,children:a.jsx(ur,{"data-orientation":"vertical",...b,ref:x,style:{...b.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:M=>{const T=N(M.clientY);c?.(T)},onSlideMove:M=>{const T=N(M.clientY);m?.(T)},onSlideEnd:()=>{C.current=void 0,u?.()},onStepKeyDown:M=>{const E=ar[z?"from-bottom":"from-top"].includes(M.key);g?.({event:M,direction:E?-1:1})}})})}),ur=d.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:o,onSlideMove:i,onSlideEnd:c,onHomeKeyDown:m,onEndKeyDown:u,onStepKeyDown:g,...b}=e,I=Jt(yt,r);return a.jsx(Mt.span,{...b,ref:t,onKeyDown:wt(e.onKeyDown,x=>{x.key==="Home"?(m(x),x.preventDefault()):x.key==="End"?(u(x),x.preventDefault()):rr.concat(or).includes(x.key)&&(g(x),x.preventDefault())}),onPointerDown:wt(e.onPointerDown,x=>{const C=x.target;C.setPointerCapture(x.pointerId),x.preventDefault(),I.thumbs.has(C)?C.focus():o(x)}),onPointerMove:wt(e.onPointerMove,x=>{x.target.hasPointerCapture(x.pointerId)&&i(x)}),onPointerUp:wt(e.onPointerUp,x=>{const C=x.target;C.hasPointerCapture(x.pointerId)&&(C.releasePointerCapture(x.pointerId),c(x))})})}),dr="SliderTrack",mr=d.forwardRef((e,t)=>{const{__scopeSlider:r,...o}=e,i=Jt(dr,r);return a.jsx(Mt.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...o,ref:t})});mr.displayName=dr;var hn="SliderRange",fr=d.forwardRef((e,t)=>{const{__scopeSlider:r,...o}=e,i=Jt(hn,r),c=cr(hn,r),m=d.useRef(null),u=Ke(t,m),g=i.values.length,b=i.values.map(C=>pr(C,i.min,i.max)),I=g>1?Math.min(...b):0,x=100-Math.max(...b);return a.jsx(Mt.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...o,ref:u,style:{...e.style,[c.startEdge]:I+"%",[c.endEdge]:x+"%"}})});fr.displayName=hn;var gn="SliderThumb",hr=d.forwardRef((e,t)=>{const r=ua(e.__scopeSlider),[o,i]=d.useState(null),c=Ke(t,u=>i(u)),m=d.useMemo(()=>o?r().findIndex(u=>u.ref.current===o):-1,[r,o]);return a.jsx(ga,{...e,ref:c,index:m})}),ga=d.forwardRef((e,t)=>{const{__scopeSlider:r,index:o,name:i,...c}=e,m=Jt(gn,r),u=cr(gn,r),[g,b]=d.useState(null),I=Ke(t,R=>b(R)),x=g?m.form||!!g.closest("form"):!0,C=la(g),z=m.values[o],N=z===void 0?0:pr(z,m.min,m.max),M=xa(o,m.values.length),T=C?.[u.size],E=T?ya(T,N,u.direction):0;return d.useEffect(()=>{if(g)return m.thumbs.add(g),()=>{m.thumbs.delete(g)}},[g,m.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${N}% + ${E}px)`},children:[a.jsx(fn.ItemSlot,{scope:e.__scopeSlider,children:a.jsx(Mt.span,{role:"slider","aria-label":e["aria-label"]||M,"aria-valuemin":m.min,"aria-valuenow":z,"aria-valuemax":m.max,"aria-orientation":m.orientation,"data-orientation":m.orientation,"data-disabled":m.disabled?"":void 0,tabIndex:m.disabled?void 0:0,...c,ref:I,style:z===void 0?{display:"none"}:e.style,onFocus:wt(e.onFocus,()=>{m.valueIndexToChangeRef.current=o})})}),x&&a.jsx(gr,{name:i??(m.name?m.name+(m.values.length>1?"[]":""):void 0),form:m.form,value:z},o)]})});hr.displayName=gn;var pa="RadioBubbleInput",gr=d.forwardRef(({__scopeSlider:e,value:t,...r},o)=>{const i=d.useRef(null),c=Ke(i,o),m=sa(t);return d.useEffect(()=>{const u=i.current;if(!u)return;const g=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(g,"value").set;if(m!==t&&I){const x=new Event("input",{bubbles:!0});I.call(u,t),u.dispatchEvent(x)}},[m,t]),a.jsx(Mt.input,{style:{display:"none"},...r,ref:c,defaultValue:t})});gr.displayName=pa;function va(e=[],t,r){const o=[...e];return o[r]=t,o.sort((i,c)=>i-c)}function pr(e,t,r){const c=100/(r-t)*(e-t);return nr(c,[0,100])}function xa(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function wa(e,t){if(e.length===1)return 0;const r=e.map(i=>Math.abs(i-t)),o=Math.min(...r);return r.indexOf(o)}function ya(e,t,r){const o=e/2,c=yn([0,50],[0,o]);return(o-c(t)*r)*r}function ba(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function Sa(e,t){if(t>0){const r=ba(e);return Math.min(...r)>=t}return!0}function yn(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(r-e[0])}}function Ca(e){return(String(e).split(".")[1]||"").length}function Pa(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var vr=sr,xr=mr,wr=fr,yr=hr;const Ea=e=>{const t=d.useRef(e);return d.useEffect(()=>void(t.current=e),[e]),d.useCallback(()=>t.current,[])};function On(e){const t=[];for(let r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t}function Ia(e){return t=>{let r,o;d.isValidElement(t)?(r=t,o=r.props):o=t;const[i,c]=ja({buffered:[],time:0,duration:0,paused:!0,muted:!1,volume:1,playing:!1,hasAudio:!1}),m=vn(()=>i),u=d.useRef(null),g=(S,V)=>F=>{try{V&&V(F)}finally{S&&S(F)}},b=()=>c({paused:!1}),I=()=>c({playing:!0}),x=()=>c({playing:!1}),C=()=>c({paused:!0,playing:!1}),z=()=>{const S=u.current;S&&c({muted:S.muted,volume:S.volume})},N=()=>{const S=u.current;if(!S)return;const{duration:V,buffered:F}=S;c({duration:V,buffered:On(F)})},M=()=>{const S=u.current;S&&c({time:S.currentTime})},T=()=>{const S=u.current;S&&c({buffered:On(S.buffered)})},E=S=>{const V=S.currentTarget,F=V.srcObject instanceof MediaStream?V.srcObject.getAudioTracks().length>0:V.webkitAudioDecodedByteCount===void 0?!0:V.webkitAudioDecodedByteCount>0;c({hasAudio:F})};r?r=d.cloneElement(r,{controls:!1,...o,ref:u,onPlay:g(o.onPlay,b),onPlaying:g(o.onPlaying,I),onWaiting:g(o.onWaiting,x),onPause:g(o.onPause,C),onVolumeChange:g(o.onVolumeChange,z),onDurationChange:g(o.onDurationChange,N),onTimeUpdate:g(o.onTimeUpdate,M),onProgress:g(o.onProgress,T),onCanPlay:g(o.onCanPlay,E)}):r=d.createElement(e,{controls:!1,...o,ref:u,onPlay:g(o.onPlay,b),onPlaying:g(o.onPlaying,I),onWaiting:g(o.onWaiting,x),onPause:g(o.onPause,C),onVolumeChange:g(o.onVolumeChange,z),onDurationChange:g(o.onDurationChange,N),onTimeUpdate:g(o.onTimeUpdate,M),onProgress:g(o.onProgress,T),onCanPlay:g(o.onCanPlay,E)});let R=!1;const D=d.useState(()=>({play:()=>{const S=u.current;if(S&&!R){const V=S.play().catch(Wn);if(typeof V=="object"){R=!0;const O=()=>{R=!1};V.then(O,O)}return V}},pause:()=>{const S=u.current;if(S&&!R)return S.pause()},seek:S=>{const V=m(),F=u.current;!F||V.duration===void 0||(S=Math.min(V.duration,Math.max(0,S)),F.currentTime=S)},volume:S=>{const V=u.current;V&&(S=Math.min(1,Math.max(0,S)),V.volume=S,c({volume:S}))},mute:()=>{const S=u.current;S&&(S.muted=!0)},unmute:()=>{const S=u.current;S&&(S.muted=!1)}}))[0];return d.useEffect(()=>{const S=u.current;S&&(c({volume:S.volume,muted:S.muted,paused:S.paused}),o.autoPlay&&S.paused&&D.play())},[o.src]),[r,i,D,u]}}const ja=(e={})=>{const[t,r]=d.useState(e),o=d.useCallback(i=>{r(c=>Object.assign({},c,typeof i=="function"?i(c):i))},[]);return[t,o]},Ra=Ia("video"),Aa=e=>({icon1:t,icon2:r,status:o,className:i,icon1ClassName:c,icon2ClassName:m})=>{const[u,g]=d.useState(!1);d.useEffect(()=>(g(!0),()=>g(!1)),[]);const b=u?e.initial:!0,{animate:I}=e,{exit:x}=e;return a.jsx(Xr,{mode:"popLayout",children:o==="init"?typeof t=="string"?a.jsx(it.i,{className:Ie(c,i,t),initial:b,animate:I,exit:x},"1"):a.jsx(it.span,{initial:b,animate:I,exit:x,children:d.cloneElement(t,{className:Ie(c,i)})},"1"):typeof r=="string"?a.jsx(it.i,{className:Ie(m,i,r),initial:b,animate:I,exit:x},"2"):a.jsx(it.span,{initial:b,animate:I,exit:x,children:d.cloneElement(r,{className:Ie(m,i)})},"2")})},br=Aa({initial:{scale:0},animate:{scale:1},exit:{scale:0}}),Ta=({onVolumeChange:e,volume:t})=>a.jsxs(vr,{className:"relative flex h-16 w-1 flex-col items-center rounded p-1",max:1,step:.01,orientation:"vertical",value:[t??.8],onValueChange:r=>{e?.(r[0])},children:[a.jsx(xr,{className:"relative w-1 grow rounded bg-zinc-500",children:a.jsx(wr,{className:"absolute w-full rounded bg-black dark:bg-white"})}),a.jsx(yr,{className:"block size-3 rounded-full bg-black dark:bg-white","aria-label":"Volume"})]}),xe=Ar(null),Ma=({ref:e,src:t,className:r,variant:o="player",...i})=>{const c=o==="player",[m,u]=d.useState(null),g=In(1),b=In(0),I=vn(R=>{c&&(R?.stopPropagation(),C.playing?(z.pause(),u("pause")):(z.play(),u("play")),b.jump(1),g.jump(1),Hr(()=>{g.set(1.3),b.set(0)}))}),[x,C,z,N]=Ra({src:t,className:r,playsInline:!0,...i,controls:!1,onClick(R){i.onClick?.(R),I(R)},muted:!c,onDoubleClick(R){i.onDoubleClick?.(R),c&&(R.preventDefault(),R.stopPropagation(),document.fullscreenElement?document.exitFullscreen():E.current?.requestFullscreen())}}),M=Ea(C),T=d.useState(z)[0],E=d.useRef(null);return d.useImperativeHandle(e,()=>({getElement:()=>N.current,getState:()=>M(),controls:T,wrapperRef:E}),[M,N,T]),a.jsxs("div",{className:"group center relative size-full",ref:E,children:[x,a.jsx("div",{className:"center pointer-events-none absolute inset-0 flex",children:a.jsx(it.div,{className:"center flex size-20 rounded-full bg-black p-3",style:{scale:g,opacity:b},children:a.jsx("i",{className:Ie("size-8 text-white",m==="play"?"i-mingcute-play-fill":"i-mingcute-pause-fill")})})}),a.jsxs(xe.Provider,{value:d.useMemo(()=>({state:C,controls:z,wrapperRef:E,src:t,variant:o}),[C,z,t,o]),children:[o==="preview"&&C.hasAudio&&a.jsx(za,{}),c&&a.jsx(Da,{})]})]})},za=()=>{const e=Vn(xe),t=e.state.muted;return a.jsx(Yt,{className:"center absolute right-4 top-4 z-10 size-7 rounded-full bg-black/50 opacity-0 duration-200 group-hover:opacity-100",onClick:r=>{r.stopPropagation(),t?e.controls.unmute():e.controls.mute()},children:a.jsx(br,{className:"size-4 text-white",icon1:"i-mgc-volume-cute-re",icon2:"i-mgc-volume-mute-cute-re",status:t?"done":"init"})})},Da=d.memo(()=>{const e=qe(xe,o=>o.controls),t=qe(xe,o=>o.state.paused),r=Yr();return a.jsxs(it.div,{onClick:Ur,drag:!0,dragListener:!1,dragControls:r,dragElastic:0,dragMomentum:!1,dragConstraints:{current:document.documentElement},className:Ie("absolute inset-x-8 bottom-2 h-10 rounded-full border bg-zinc-100/90 backdrop-blur-xl dark:border-transparent dark:bg-neutral-700/90","flex items-center gap-3 px-4","mx-auto max-w-[80vw]"),children:[a.jsx("div",{onPointerDownCapture:r.start.bind(r),className:"absolute inset-0 z-[1]"}),a.jsx(Zt,{label:t?"播放":"暂停",className:"center relative flex",onClick:()=>{t?e.play():e.pause()},children:a.jsx("span",{className:"center flex",children:a.jsx(br,{status:t?"init":"done",icon1:"i-mingcute-play-fill size-5",icon2:"i-mingcute-pause-fill size-5"})})}),a.jsx(La,{}),a.jsxs(it.div,{className:"relative z-[1] flex items-center gap-2",children:[a.jsx(Fa,{}),a.jsx(ka,{}),a.jsx(Na,{})]})]})}),Na=()=>{const e=qe(xe,o=>o.wrapperRef),[t,r]=d.useState(!!document.fullscreenElement);return d.useEffect(()=>{const o=()=>{r(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",o),()=>{document.removeEventListener("fullscreenchange",o)}},[]),a.jsx(Zt,{label:t?"退出全屏":"全屏",onClick:()=>{e.current&&(t?document.exitFullscreen():e.current.requestFullscreen())},children:t?a.jsx("i",{className:"i-mingcute-fullscreen-2-fill size-5"}):a.jsx("i",{className:"i-mingcute-fullscreen-exit-fill size-5"})})},ka=()=>{const e=qe(xe,i=>i.src),[t,r]=d.useState(!1),o=vn(()=>{r(!0),fetch(e).then(i=>i.blob()).then(i=>{const c=URL.createObjectURL(i),m=document.createElement("a");m.href=c,m.download=e.split("/").pop(),m.click(),URL.revokeObjectURL(c),r(!1)})});return a.jsx(Zt,{label:"下载",onClick:o,children:t?a.jsx("i",{className:"i-mingcute-loading-3-fill size-5 animate-spin"}):a.jsx("i",{className:"i-mingcute-download-2-fill size-5"})})},Fa=()=>{const e=qe(xe,i=>i.state.hasAudio),t=qe(xe,i=>i.controls),r=qe(xe,i=>i.state.volume),o=qe(xe,i=>i.state.muted);return e?a.jsx(Zt,{label:a.jsx(Ta,{onVolumeChange:t.volume,volume:r}),onClick:()=>{o?t.unmute():t.mute()},children:o?a.jsx("i",{className:"i-mingcute-volume-mute-fill size-5",title:"静音"}):a.jsx("i",{className:"i-mingcute-volume-fill size-5",title:"取消静音"})}):null},La=()=>{const{state:e,controls:t}=Vn(xe),[r,o]=d.useState(!1),[i,c]=d.useState(0);return a.jsxs(vr,{className:"relative z-[1] flex size-full items-center transition-all duration-200 ease-in-out",min:0,max:e.duration,step:.01,value:[r?i:e.time],onPointerDown:()=>{e.playing&&t.pause(),c(e.time),o(!0)},onValueChange:m=>{c(m[0]),d.startTransition(()=>{t.seek(m[0])})},onValueCommit:()=>{t.play(),o(!1),t.seek(i)},children:[a.jsx(xr,{className:"relative h-1 w-full grow rounded bg-white dark:bg-neutral-800",children:a.jsx(wr,{className:"absolute h-1 rounded bg-zinc-500/40 dark:bg-neutral-600"})}),a.jsx(yr,{className:"block h-3 w-[3px] rounded-[1px] bg-zinc-500 dark:bg-zinc-400","aria-label":"Progress"})]})},Zt=({className:e,onClick:t,children:r,label:o})=>a.jsx(Wr,{type:"tooltip",placement:"top",wrapperClassName:"flex center",triggerElement:a.jsx(Yt,{className:Ie("z-[2] flex center",e),onClick:t,children:r||a.jsx("i",{className:e})}),children:o}),Oa=e=>e.src?a.jsx(Ma,{...e,src:e.src,className:Ie("mx-auto select-none",e.className),playsInline:!0,muted:!0,autoPlay:!0}):null,Sr=e=>{const{src:t,alt:r}=e,o={...e};o.alt=r?.replace(/^[¡!]/,"");const{w:i}=Xn(),c=t.split(".").pop(),m=zt(t);if(oa(c)){const u=r?.replace(/^[¡!]/,"");return a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(Oa,{src:t,className:m&&"fit",style:{"--video-height":m?.height,"--video-width":m?.width},playsInline:!0,autoPlay:!1}),u&&a.jsxs("p",{className:"mt-1 flex flex-col items-center justify-center text-sm",children:[a.jsx(an,{className:"w-[80px] opacity-80"}),a.jsx("span",{className:"opacity-90",children:u})]})]})}return a.jsx(Zn,{...o,containerWidth:i})},di=e=>a.jsx(io,{children:a.jsx("div",{className:"relative flex min-w-0 grow",children:a.jsx(Sr,{...e})})}),mi=({imagesSrc:e,Wrapper:t,height:r=1})=>a.jsx("div",{className:"relative",style:{paddingBottom:`${r*100}%`},children:a.jsx(ta,{photoClosable:!0,children:a.jsx(t,{className:"absolute inset-0",children:e.map(o=>a.jsx(Cr,{src:o},o))})})}),Cr=d.memo(({src:e})=>{const{accent:t,height:r,width:o,blurHash:i}=zt(e)||{},c=Tr(e,600),m=d.useRef(null),u=o&&r?o>r:!0,g=r&&o?Gn:"img";return a.jsxs("div",{className:"center relative flex size-full overflow-hidden rounded-md bg-cover bg-center",style:{backgroundColor:t},children:[!!i&&a.jsx(xn,{hash:i,resolutionX:32,resolutionY:32,className:"!size-full"}),a.jsx(_n,{offset:30,children:a.jsx(na,{src:e,children:a.jsx(g,{loading:"lazy",alt:"",height:r,width:o,src:c,ref:m,className:at("!m-0 max-w-max object-cover",u?"h-full":"w-full")})})})]})});Cr.displayName="GridZoomImage";const _a="_root_1ug9l_1",Va="_indicator_1ug9l_2",Ba="_container_1ug9l_7",Ha="_child_1ug9l_17",Xt={root:_a,indicator:Va,container:Ba,child:Ha},bn=60,Ua=15,Wa=5e3,fi=e=>{const{images:t}=e,[r,o]=d.useState(null),[,i]=d.useState({}),c=d.useRef(0);d.useEffect(()=>{if(!r)return;const E=new ResizeObserver(()=>{i({}),R(r)});function R(D){const S=D.children.item(0);S&&(c.current=S.clientWidth)}return R(r),E.observe(r),()=>{E.disconnect()}},[r]);const[m,u]=d.useState(0),g=d.useCallback(zr(E=>{const R=E.target,D=Math.floor((R.scrollLeft+bn+15)/c.current);u(D)},60),[]),b=d.useCallback(E=>{r&&r.scrollTo({left:c.current*E,behavior:"smooth"})},[r]),I=d.useRef(null),x=sn(m),C=sn(t.length),z=d.useRef(!0),N=d.useRef(!0),M=d.useCallback(()=>{N.current&&(N.current=!1,clearInterval(I.current))},[]),{ref:T}=Mr({initialInView:!1,triggerOnce:t.length<2,onChange(E){C.current<2||!N.current||(E?I.current=setInterval(()=>{x.current+1>C.current-1&&z.current&&(z.current=!1),x.current-1<0&&!z.current&&(z.current=!0);const R=x.current+(z.current?1:-1);b(R)},Wa):I.current=clearInterval(I.current))}});if(d.useEffect(()=>()=>{clearInterval(I.current)},[]),t.length===0)return null;if(t.length===1){const E=t[0];return a.jsx(Sr,{src:E.url,alt:E.footnote})}return a.jsxs("div",{className:at("w-full","relative",Xt.root),ref:T,onTouchMove:M,onWheel:M,children:[a.jsx("div",{className:at("w-full overflow-auto whitespace-nowrap",Xt.container),onTouchStart:M,onScroll:g,ref:o,onTouchMove:M,onWheel:M,children:t.map(E=>a.jsx(Pr,{image:E},E.url))}),m>0&&a.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-2 flex items-center [&_*]:duration-200",children:a.jsx(Yt,{onClick:()=>{if(!r)return;const E=m-1;b(E)},className:"border-border center pointer-events-auto flex size-6 rounded-full border bg-base-100 p-1 opacity-80 hover:opacity-100",children:a.jsx("i",{className:"i-mingcute-left-fill"})})}),m<t.length-1&&a.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-2 flex items-center [&_*]:duration-200",children:a.jsx(Yt,{onClick:()=>{if(!r)return;const E=m+1;b(E)},className:"border-border center pointer-events-auto flex size-6 rounded-full border bg-base-100 p-1 opacity-80 hover:opacity-100",children:a.jsx("i",{className:"i-mingcute-right-fill"})})}),a.jsx("div",{className:at(Xt.indicator,"space-x-2"),children:Array.from({length:t.length}).map((E,R)=>a.jsx("div",{className:at("size-[6px] cursor-pointer rounded-full bg-stone-600 opacity-50 transition-opacity duration-200 ease-in-out",m==R&&"!opacity-100"),onClick:b.bind(null,R)},R))})]})},Xa={width:`calc(100% - ${bn}px)`,marginRight:`${Ua}px`},Pr=d.memo(({image:e})=>{const t=zt(e.url),r=e.name,i=e.footnote||(["!","¡"].some(m=>m==r?.[0])?r?.slice(1):"")||"",{w:c}=Xn();return a.jsx("div",{style:Xa,className:at(Xt.child,"inline-block self-center"),children:a.jsx(Zn,{accent:t?.accent,src:e.url,alt:i,containerWidth:c-bn})},`${e.url}-${e.name||""}`)});Pr.displayName="GalleryItem";export{Zn as F,fi as G,Gn as I,si as M,Oa as V,io as W,di as a,mi as b,ca as c,ia as d,Sr as e,Xn as u};
