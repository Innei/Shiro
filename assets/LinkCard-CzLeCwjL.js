const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./NotePreview-D7qSjluq.js","./index-BrLHw_rO.js","./index-DU0cH6De.css","./useQuery-BbGCGyIB.js","./owner-CdJStYC4.js","./helper-jIGjUHP-.js","./ShareModal-C5VdFJDI.js","./use-event-callback-DU0VCmJv.js","./Gallery-CJAlU4I7.js","./index-NWdC_amn.js","./lodash-Ch6W0gOk.js","./use-ref-value-DeLNmgK0.js","./StyledButton-CcLO_ywH.js","./index-Ba4KaKv3.js","./proxy-RnJDDj_j.js","./use-is-unmounted-CIFBFr9d.js","./index-hPcEA_SR.js","./dom-BowoBODo.js","./FloatPopover-BsJhjSNd.js","./spring-BSAt5qpK.js","./use-spring-BmvTwTfg.js","./use-combine-values-BYGqeSLy.js","./index-DW-JcjwO.js","./use-drag-controls-BvgSnI2Q.js","./Gallery-DnQEyDp_.css","./Markdown-B7F4KgtF.js","./index-D5dveEOu.js","./use-is-dark-CQSQL4aT.js","./Shiki-k9E3sR35.js","./Shiki-BM0qRJ8D.css","./index-C3ieoUPM.css","./provider-CPAML1Dv.js","./use-animation-DiJwvt5e.js","./visual-element-D0q80t7I.js","./SocialSourceLink-DAa8hOSp.js","./bangumi-DGWEI3g8.js","./Collapse-VKiPgm-a.js","./Markdown-DM9GoBKw.css","./use-motion-template-ChoBp52r.js","./index-Bv477fdY.js","./customParseFormat-DLTVoePo.js","./ShareModal-Dpmqmgbb.css","./NotePreview-BI2RbilD.css","./PostPreview-ipQa4lxj.js"])))=>i.map(i=>d[i]);
import{g as xe,j as e,r as w,_ as ie}from"./index-BrLHw_rO.js";import{u as ke,B as _e,C as K,x as ce}from"./owner-CdJStYC4.js";import{L as ye}from"./index-Ba4KaKv3.js";import{u as ve,a as $e,c as Te,L as Me,g as Ce}from"./index-NWdC_amn.js";import{a as Se}from"./use-event-callback-DU0VCmJv.js";import{u as we}from"./provider-CPAML1Dv.js";import{m as Ee}from"./spring-BSAt5qpK.js";import{m as te}from"./proxy-RnJDDj_j.js";import{c as Ie}from"./index-hPcEA_SR.js";import{a as Pe}from"./bangumi-DGWEI3g8.js";import{p as Le}from"./dom-BowoBODo.js";import{c as se}from"./helper-jIGjUHP-.js";import{a as Y}from"./use-combine-values-BYGqeSLy.js";import{u as Re}from"./use-motion-template-ChoBp52r.js";const Fe=()=>ke(_e);var j=(s=>(s.GHRepo="gh-repo",s.Self="self",s.MixSpace="mx-space",s.GHCommit="gh-commit",s.GHPr="gh-pr",s.TMDB="tmdb",s.Bangumi="bangumi",s.LEETCODE="leetcode",s.Arxiv="arxiv",s.QQMusicSong="qq-music-song",s.NeteaseMusicSong="netease-music-song",s))(j||{}),ee,me;function Ae(){return me||(me=1,ee=function(s,t){t=t||{},t.listUnicodeChar=t.hasOwnProperty("listUnicodeChar")?t.listUnicodeChar:!1,t.stripListLeaders=t.hasOwnProperty("stripListLeaders")?t.stripListLeaders:!0,t.gfm=t.hasOwnProperty("gfm")?t.gfm:!0,t.useImgAltText=t.hasOwnProperty("useImgAltText")?t.useImgAltText:!0,t.abbr=t.hasOwnProperty("abbr")?t.abbr:!1,t.replaceLinksWithURL=t.hasOwnProperty("replaceLinksWithURL")?t.replaceLinksWithURL:!1,t.htmlTagsToSkip=t.hasOwnProperty("htmlTagsToSkip")?t.htmlTagsToSkip:[],t.throwError=t.hasOwnProperty("throwError")?t.throwError:!1;var n=s||"";n=n.replace(/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/gm,"");try{t.stripListLeaders&&(t.listUnicodeChar?n=n.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,t.listUnicodeChar+" $1"):n=n.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,"$1")),t.gfm&&(n=n.replace(/\n={2,}/g,`
`).replace(/~{3}.*\n/g,"").replace(/~~/g,"").replace(/```(?:.*)\n([\s\S]*?)```/g,(u,a)=>a.trim())),t.abbr&&(n=n.replace(/\*\[.*\]:.*\n/,""));let m=/<[^>]*>/g;if(t.htmlTagsToSkip&&t.htmlTagsToSkip.length>0){const u=t.htmlTagsToSkip.join("|");m=new RegExp(`<(?!/?(${u})(?=>|s[^>]*>))[^>]*>`,"g")}n=n.replace(m,"").replace(/^[=\-]{2,}\s*$/g,"").replace(/\[\^.+?\](\: .*?$)?/g,"").replace(/\s{0,2}\[.*?\]: .*?$/g,"").replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g,t.useImgAltText?"$1":"").replace(/\[([\s\S]*?)\]\s*[\(\[].*?[\)\]]/g,t.replaceLinksWithURL?"$2":"$1").replace(/^(\n)?\s{0,3}>\s?/gm,"$1").replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g,"").replace(/^(\n)?\s{0,}#{1,6}\s*( (.+))? +#+$|^(\n)?\s{0,}#{1,6}\s*( (.+))?$/gm,"$1$3$4$6").replace(/([\*]+)(\S)(.*?\S)??\1/g,"$2$3").replace(/(^|\W)([_]+)(\S)(.*?\S)??\2($|\W)/g,"$1$3$4$5").replace(/(`{3,})(.*?)\1/gm,"$2").replace(/`(.+?)`/g,"$1").replace(/~(.*?)~/g,"$1")}catch(m){if(t.throwError)throw m;return console.error("remove-markdown encountered error: %s",m),s}return n}),ee}var De=Ae();const Oe=xe(De);var Z={exports:{}};/**
* Generate unique and beautiful colors from any texts or numbers
 * @version v1.1.1
 * @link https://github.com/dastoori/uniqolor#README
 * @author Rasool Dastoori
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */var Ue=Z.exports,ue;function He(){return ue||(ue=1,function(s,t){(function(n,m){s.exports=m()})(Ue,function(){function n(l,o){var r=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(r!=null){var c,f,g,x,v=[],N=!0,k=!1;try{if(g=(r=r.call(l)).next,o!==0)for(;!(N=(c=g.call(r)).done)&&(v.push(c.value),v.length!==o);N=!0);}catch(L){k=!0,f=L}finally{try{if(!N&&r.return!=null&&(x=r.return(),Object(x)!==x))return}finally{if(k)throw f}}return v}}function m(l,o){return i(l)||n(l,o)||p(l,o)||y()}function u(l){return a(l)||d(l)||p(l)||O()}function a(l){if(Array.isArray(l))return h(l)}function i(l){if(Array.isArray(l))return l}function d(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function p(l,o){if(l){if(typeof l=="string")return h(l,o);var r=Object.prototype.toString.call(l).slice(8,-1);if(r==="Object"&&l.constructor&&(r=l.constructor.name),r==="Map"||r==="Set")return Array.from(l);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(l,o)}}function h(l,o){(o==null||o>l.length)&&(o=l.length);for(var r=0,c=new Array(o);r<o;r++)c[r]=l[r];return c}function O(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B=[0,100],U=[0,100],M=function(o){return"".concat(o.length===1?"0":"").concat(o)},C=function(o,r,c){return Math.max(Math.min(o,c),r)},_=function(o,r){return Math.floor(Math.random()*(r-o+1))+o},J=function l(o,r,c){for(var f=_(o,r),g=0;g<c?.length;g++){var x=c[g];if(x?.length===2&&f>=x[0]&&f<=x[1])return l(o,r,c)}return f},X=function(o){for(var r=o.length,c=0,f=0;f<r;f++)c=(c<<5)-c+o.charCodeAt(f),c&=c;return c},$=function(o,r){return typeof r=="number"?r:o%Math.abs(r[1]-r[0])+r[0]},S=function(o,r){return typeof o=="number"?C.apply(void 0,[Math.abs(o)].concat(u(r))):o.length===1||o[0]===o[1]?C.apply(void 0,[Math.abs(o[0])].concat(u(r))):[Math.abs(C.apply(void 0,[o[0]].concat(u(r)))),C.apply(void 0,[Math.abs(o[1])].concat(u(r)))]},H=function(o,r,c){return c<0?c+=1:c>1&&(c-=1),c<1/6?o+(r-o)*6*c:c<1/2?r:c<2/3?o+(r-o)*(2/3-c)*6:o},E=function(o,r,c){var f,g,x;if(o/=360,r/=100,c/=100,r===0)f=g=x=c;else{var v=c<.5?c*(1+r):c+r-c*r,N=2*c-v;f=H(N,v,o+1/3),g=H(N,v,o),x=H(N,v,o-1/3)}return[Math.round(f*255),Math.round(g*255),Math.round(x*255)]},I=function(o,r,c,f){return(o*299+r*587+c*114)/1e3>=f},P=function(o,r,c){return"hsl(".concat(o,", ").concat(r,"%, ").concat(c,"%)")},G=function(o,r,c,f){switch(f){case"rgb":return"rgb(".concat(o,", ").concat(r,", ").concat(c,")");case"hex":default:return"#".concat(M(o.toString(16))).concat(M(r.toString(16))).concat(M(c.toString(16)))}},z=function(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=r.format,f=c===void 0?"hex":c,g=r.saturation,x=g===void 0?[50,55]:g,v=r.lightness,N=v===void 0?[50,60]:v,k=r.differencePoint,L=k===void 0?130:k,R=Math.abs(X(String(o))),V=$(R,[0,360]),Q=$(R,S(x,B)),F=$(R,S(N,U)),W=E(V,Q,F),A=m(W,3),q=A[0],oe=A[1],le=A[2];return{color:f==="hsl"?P(V,Q,F):G(q,oe,le,f),isLight:I(q,oe,le,L)}};return z.random=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=l.format,r=o===void 0?"hex":o,c=l.saturation,f=c===void 0?[50,55]:c,g=l.lightness,x=g===void 0?[50,60]:g,v=l.differencePoint,N=v===void 0?130:v,k=l.excludeHue;f=S(f,B),x=S(x,U);var L=k?J(0,359,k):_(0,359),R=typeof f=="number"?f:_.apply(void 0,u(f)),V=typeof x=="number"?x:_.apply(void 0,u(x)),Q=E(L,R,V),F=m(Q,3),W=F[0],A=F[1],q=F[2];return{color:r==="hsl"?P(L,R,V):G(W,A,q,r),isLight:I(W,A,q,N)}},z})}(Z)),Z.exports}var Ve=He();const ae=xe(Ve);function be(s){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...s,children:e.jsxs("g",{fill:"none",fillRule:"evenodd",children:[e.jsx("path",{d:"M24 0v24H0V0h24ZM12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036c-.01-.003-.019 0-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.016-.018Zm.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01l-.184-.092Z"}),e.jsx("path",{fill:"currentColor",d:"M13.08 2.868a1.25 1.25 0 0 0-2.16 0L8.126 7.665L2.697 8.842a1.25 1.25 0 0 0-.667 2.054l3.7 4.141l-.56 5.525a1.25 1.25 0 0 0 1.748 1.27L12 19.592l5.082 2.24a1.25 1.25 0 0 0 1.748-1.27l-.56-5.525l3.7-4.14a1.25 1.25 0 0 0-.667-2.055l-5.428-1.176l-2.795-4.798ZM12 17.523c.172 0 .344.035.504.106l4.206 1.854l-.463-4.573a1.25 1.25 0 0 1 .312-.959l3.062-3.427l-4.492-.973a1.25 1.25 0 0 1-.816-.592L12 4.987v12.536Z"})]})})}var re=(s=>(s.Click="click",s.Interaction="interaction",s.Impression="impression",s))(re||{});const qe=s=>{const{shouldTrack:t=!0,...n}=s;return t?e.jsx(je,{...n}):e.jsx(e.Fragment,{children:s.children})},je=w.memo(s=>{const[t,n]=w.useState(!1),m=Fe(),{ref:u}=ve({initialInView:!1,triggerOnce:!0,onChange(a){if(a){if(n(!0),m)return;document.dispatchEvent(new CustomEvent("impression",{detail:{action:s.action??re.Impression,label:s.trackerMessage}})),s.onTrack?.()}}});return e.jsxs(e.Fragment,{children:[s.children,!t&&e.jsx("span",{ref:u})]})});je.displayName="ImpressionView";const de=s=>{const{dismissAll:t,dismissTop:n}=we();return e.jsxs("div",{className:"scrollbar-none relative mx-auto mt-[10vh] max-w-full overflow-auto px-2 lg:max-w-[65rem] lg:p-0",children:[e.jsx(qe,{action:re.Impression,trackerMessage:"Peek Modal"}),e.jsx(te.div,{initial:{opacity:.5,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:Ee,className:"scrollbar-none",children:s.children}),e.jsxs(te.div,{initial:!0,exit:{opacity:0},className:"fixed right-2 top-2 flex items-center gap-4",children:[e.jsxs(ye,{className:"center flex size-8 rounded-full p-1 shadow-sm ring-1 ring-zinc-200 dark:ring-neutral-800",href:s.to,onClick:t,children:[e.jsx("i",{className:"i-mingcute-fullscreen-2-line text-lg"}),e.jsx("span",{className:"sr-only",children:"Go to this link"})]}),e.jsxs("button",{className:"center flex size-8 rounded-full p-1 shadow-sm ring-1 ring-zinc-200 dark:ring-neutral-800",onClick:n,children:[e.jsx("i",{className:"i-mingcute-close-line text-lg"}),e.jsx("span",{className:"sr-only",children:"Dimiss"})]})]})]})},Be=()=>{const s=Se(),{present:t}=we();return w.useCallback(n=>{if(s)return;const m={clickOutsideToDismiss:!0,title:"Preview",modalClassName:"relative mx-auto mt-[10vh] scrollbar-none max-w-full overflow-auto px-2 lg:max-w-[65rem] lg:p-0"};return n.startsWith("/notes/")?(requestAnimationFrame(async()=>{const u=await ie(()=>import("./NotePreview-D7qSjluq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42]),import.meta.url).then(a=>a.NotePreview);t({...m,CustomModalComponent:()=>e.jsx(de,{to:n,children:e.jsx(u,{noteId:Number.parseInt(n.split("/").pop())})}),content:()=>null})}),!0):n.startsWith("/posts/")?(requestAnimationFrame(async()=>{const u=await ie(()=>import("./PostPreview-ipQa4lxj.js"),__vite__mapDeps([43,1,2,3,4,6,7,8,5,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41]),import.meta.url).then(p=>p.PostPreview),a=n.split("/"),i=a.pop(),d=a.pop();t({...m,CustomModalComponent:()=>e.jsx(de,{to:n,children:e.jsx(u,{category:d,slug:i})}),content:()=>null})}),!0):!1},[s,t])},Ge={typescript:"#2b7489",javascript:"#f1e05a",html:"#e34c26",java:"#b07219",go:"#00add8",vue:"#2c3e50",css:"#563d7c",yaml:"#cb171e",json:"#292929",markdown:"#083fa1",csharp:"#178600","c#":"#178600",c:"#555555",cpp:"#f34b7d","c++":"#f34b7d",python:"#3572a5",lua:"#000080",vimscript:"#199f4b",shell:"#89e051",dockerfile:"#384d54",ruby:"#701516",php:"#4f5d95",lisp:"#3fb68b",kotlin:"#F18E33",rust:"#dea584",dart:"#00B4AB",swift:"#ffac45","objective-c":"#438eff","objective-c++":"#6866fb",r:"#198ce7",matlab:"#e16737",scala:"#c22d40",sql:"#e38c00",perl:"#0298c3"};let T=!1,D=[];function Ne(){D.forEach(s=>s(T))}function he(s){(s.metaKey||s.ctrlKey)&&!T&&(T=!0,Ne())}function fe(){T&&(T=!1,Ne())}function ze(s){D.push(s),s(T)}function Qe(s){D=D.filter(t=>t!==s)}function We(){const[s,t]=w.useState(T);return w.useEffect(()=>(ze(t),D.length===1&&(window.addEventListener("keydown",he),window.addEventListener("keyup",fe)),()=>{Qe(t),D.length===0&&(window.removeEventListener("keydown",he),window.removeEventListener("keyup",fe))}),[]),s}const pe="https://api.github.com",Ze="/api/gh",ne=s=>{const t=s.replace(pe,"");return Promise.any([fetch(pe+t).then(n=>{if(n.status===403)throw new Error("GitHub API rate limit exceeded");return n.json()}),fetch(Ze+t).then(n=>n.json())])},Ke={tmdb:!1},Je=Te(Ke),Xe=s=>$e(Je,t=>t[s]),Ye="_contents_wowjc_29",et="_title_wowjc_38",tt="_desc_wowjc_50",st="_image_wowjc_60",at="_skeleton_wowjc_70",rt="_error_wowjc_98",b={"card-grid":"_card-grid_wowjc_1",contents:Ye,title:et,desc:tt,image:st,skeleton:at,error:rt},Ct=s=>{const t=Ie(),n=e.jsx(ot,{className:s.source==="tmdb"?"!w-screen max-w-full":""});return t?e.jsx(Me,{placeholder:n,children:e.jsx(nt,{...s,placeholder:n})}):n},nt=s=>{const{id:t,source:n=j.Self,className:m,fallbackUrl:u}=s,[a,i]=w.useState(!0),[d,p]=w.useState(!1),[h,O]=w.useState(u||"javascript:;"),[y,B]=w.useState(),U=Be(),M=We(),C=w.useCallback(async r=>{if(M)return;U(h)&&Le(r)},[h,M,U]),_=Xe("tmdb"),J=w.useCallback((r,c)=>{const f={[j.MixSpace]:ge,[j.GHRepo]:lt,[j.GHCommit]:it,[j.GHPr]:ct,[j.Self]:ge,[j.LEETCODE]:dt,[j.QQMusicSong]:ht,[j.NeteaseMusicSong]:ft,[j.Bangumi]:ut};_&&(f[j.TMDB]=mt);const g=f[r];if(!g)return{isValid:!1,fetchFn:null};const x=g.isValid(c);return{isValid:x,fetchFn:x?g.fetch:null}},[_]),{isValid:X,fetchFn:$}=w.useMemo(()=>J(n,t),[n,t]),S=w.useCallback(async()=>{$&&(i(!0),await $(t,B,O).catch(r=>{console.error("fetch card info error:",r),p(!0)}),i(!1))},[$,t]),{ref:H}=ve({triggerOnce:!0,onChange(r){r&&S()}}),E=Y(0),I=Y(0),P=Y(0),G=w.useCallback(({clientX:r,clientY:c,currentTarget:f})=>{const g=f.getBoundingClientRect();E.set(r-g.left),I.set(c-g.top),P.set(Math.hypot(g.width,g.height)*1.3)},[E,I,P]),z=Re`radial-gradient(${P}px circle at ${E}px ${I}px, var(--spotlight-color) 0%, transparent 65%)`;if(!X)return null;const l=n==="self"?ye:"a",o=y?.classNames||{};return a?e.jsx("a",{ref:H,href:h,target:n!=="self"?"_blank":"_self",rel:"noreferrer",children:s.placeholder}):e.jsxs(l,{href:h,target:n!=="self"?"_blank":"_self",className:se(b["card-grid"],(a||d)&&b.skeleton,d&&b.error,"not-prose","group",m,o.cardRoot),style:{borderColor:y?.color?`${y.color}30`:void 0},onClick:C,onMouseMove:G,children:[y?.color&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 z-0",style:{backgroundColor:y?.color,opacity:.06}}),e.jsx(te.div,{layout:!0,className:"absolute inset-0 z-0 opacity-0 duration-500 group-hover:opacity-100",style:{"--spotlight-color":`${y?.color}50`,background:z}})]}),e.jsxs("span",{className:b.contents,children:[e.jsx("span",{className:b.title,children:y?.title}),e.jsx("span",{className:b.desc,children:y?.desc})]}),(a||y?.image)&&e.jsx("span",{className:se(b.image,o.image),"data-image":y?.image||"",style:{backgroundImage:y?.image?`url(${y.image})`:void 0}})]})},ot=({className:s})=>e.jsxs("span",{className:se(b["card-grid"],b.skeleton,s),children:[e.jsxs("span",{className:b.contents,children:[e.jsx("span",{className:b.title}),e.jsx("span",{className:b.desc})]}),e.jsx("span",{className:b.image})]}),lt={isValid:s=>{const t=s.split("/");return t.length===2&&t[0].length>0&&t[1].length>0},fetch:async(s,t,n)=>{const[m,u]=s.split("/");try{const a=await ne(`https://api.github.com/repos/${m}/${u}`),i=K(a);t({title:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex-1",children:i.name}),e.jsx("span",{className:"shrink-0 place-self-end",children:i.stargazersCount>0&&e.jsxs("span",{className:"inline-flex shrink-0 items-center gap-1 self-center text-sm text-orange-400 dark:text-yellow-500",children:[e.jsx("i",{className:"i-mingcute-star-line"}),e.jsx("span",{className:"font-sans font-medium",children:i.stargazersCount})]})})]}),desc:i.description,image:i.owner.avatarUrl,color:Ge[i.language?.toLowerCase()]}),n(i.htmlUrl)}catch(a){throw console.error("Error fetching GitHub data:",a),a}}},it={isValid:s=>{const t=s.split("/");return t.length===4&&t.every(n=>n.length>0)&&t[2]==="commit"},fetch:async(s,t,n)=>{const[m,u,,a]=s.split("/");try{const i=await ne(`https://api.github.com/repos/${m}/${u}/commits/${a}`),d=K(i);t({title:e.jsx("span",{className:"font-normal",children:d.commit.message.replace(/Signed-off-by:.+/,"")}),desc:e.jsxs("span",{className:"flex items-center space-x-5 font-mono",children:[e.jsxs("span",{className:"text-uk-green-light",children:["+",d.stats.additions]}),e.jsxs("span",{className:"text-uk-red-light",children:["-",d.stats.deletions]}),e.jsx("span",{className:"text-sm",children:d.sha.slice(0,7)}),e.jsxs("span",{className:"text-sm opacity-80",children:[m,"/",u]})]}),image:d.author?.avatarUrl}),n(`https://github.com/${m}/${u}/commit/${a}`)}catch(i){throw console.error("Error fetching GitHub commit data:",i),i}}},ct={isValid:s=>{const t=s.split("/");return t.length===3&&t.every(n=>n.length>0)},fetch:async(s,t,n)=>{const[m,u,a]=s.split("/");try{const i=await ne(`https://api.github.com/repos/${m}/${u}/pulls/${a}`),d=K(i);t({title:`PR: ${d.title}`,desc:e.jsxs("span",{className:"flex items-center space-x-5 font-mono",children:[e.jsxs("span",{className:"text-uk-green-light",children:["+",d.additions]}),e.jsxs("span",{className:"text-uk-red-light",children:["-",d.deletions]}),e.jsxs("span",{className:"text-sm opacity-80",children:[m,"/",u]})]}),image:d.user.avatarUrl}),n(d.htmlUrl)}catch(i){throw console.error("Error fetching GitHub PR data:",i),i}}},ge={isValid:s=>{const[t,...n]=s.split("/");return t!=="posts"&&t!=="notes"?!1:t==="posts"?n.length===2:n.length===1},fetch:async(s,t,n)=>{const[m,...u]=s.split("/");try{let a={title:"",text:""};if(m==="posts"){const[p,h]=u;a=await ce.post.getPost(p,h),n(`/posts/${p}/${h}`)}else if(m==="notes"){const[p]=u;a=(await ce.note.getNoteById(+p)).data,n(`/notes/${p}`)}const i=a.cover||a.meta?.cover;let d="";if(i){const p=new Image;p.src=i,p.crossOrigin="Anonymous",p.onload=()=>{t(h=>h?.title!==a.title?h:{...h,color:Ce(p)})}}else d=ae(a.title,{saturation:[30,35],lightness:[60,70]}).color;t({title:a.title,desc:a.summary||`${Oe(a.text).slice(0,50)}...`,image:i||a.images?.[0]?.src,color:d})}catch(a){throw console.error("Error fetching self data:",a),a}}},mt={isValid(s){const[t,n]=s.split("/");return["tv","movie"].includes(t)&&n.length>0},async fetch(s,t,n){const[m,u]=s.split("/");t({classNames:{cardRoot:"!w-full"}});const a=navigator.language||"en-US",i=await fetch(`/api/tmdb/${m}/${u}?language=${a}`).then(h=>h.json()).catch(h=>{throw console.error("Error fetching TMDB data:",h),h}),d=m==="tv"?i.name:i.title,p=m==="tv"?i.original_name:i.original_title;t({title:e.jsxs("span",{className:"flex flex-wrap items-end gap-2",children:[e.jsx("span",{children:d}),d!==p&&e.jsxs("span",{className:"text-sm opacity-70",children:["(",p,")"]}),e.jsxs("span",{className:"inline-flex shrink-0 items-center gap-1 self-center text-xs text-orange-400 dark:text-yellow-500",children:[e.jsx(be,{}),e.jsx("span",{className:"font-sans font-medium",children:i.vote_average>0&&i.vote_average.toFixed(1)})]})]}),desc:e.jsx("span",{className:"line-clamp-none overflow-visible whitespace-pre-wrap",children:i.overview}),image:`https://image.tmdb.org/t/p/w500${i.poster_path}`,color:ae(i.name,{saturation:[30,35],lightness:[60,70]}).color,classNames:{image:"self-start !h-[75px] !w-[50px]",cardRoot:"!w-full !flex-row-reverse"}}),i.homepage&&n(i.homepage)}},ut={isValid(s){const[t,n]=s.split("/");return Pe.includes(t)&&n.length>0},async fetch(s,t,n){const[m,u]=s.split("/");t({classNames:{cardRoot:"!w-full"}});const a=await fetch(`/api/bangumi/${m}/${u}`).then(p=>p.json()).catch(p=>{throw console.error("Error fetching Bangumi data:",p),p});let i="",d="";if(m==="subject")a.name_cn&&a.name_cn!==a.name&&a.name_cn!==""?(i=a.name_cn,d=a.name):(i=a.name,d=a.name);else if(m==="character"||m==="person"){const{infobox:p}=a;p.forEach(h=>{h.key==="简体中文名"?i=typeof h.value=="string"?h.value:h.value[0].v:h.key==="别名"&&(h.value.forEach(y=>{d+=`${y.v} / `}),d=d.slice(0,-3))})}else throw new Error("Unknown bangumi type");t({title:e.jsxs("span",{className:"flex flex-wrap items-end gap-2",children:[e.jsx("span",{children:i}),i!==d&&e.jsxs("span",{className:"text-sm opacity-70",children:["(",d,")"]}),m==="subject"&&e.jsxs("span",{className:"inline-flex shrink-0 items-center gap-3 self-center",children:[e.jsxs("span",{className:"inline-flex shrink-0 items-center gap-1 self-center text-xs text-orange-400 dark:text-yellow-500",children:[e.jsx(be,{}),e.jsx("span",{className:"font-sans font-medium",children:a.rating.score>0&&a.rating.score.toFixed(1)})]}),e.jsxs("span",{className:"inline-flex shrink-0 items-center gap-1 self-center text-xs text-orange-400 dark:text-yellow-500",children:[e.jsx("i",{className:"i-mingcute-star-line"}),e.jsx("span",{className:"font-sans font-medium",children:a.collection&&a.collection.on_hold+a.collection.dropped+a.collection.wish+a.collection.collect+a.collection.doing})]})]}),(m==="character"||m==="person")&&e.jsxs("span",{className:"inline-flex shrink-0 items-center gap-1 self-center text-xs text-orange-400 dark:text-yellow-500",children:[e.jsx("i",{className:"i-mingcute-star-line"}),e.jsx("span",{className:"font-sans font-medium",children:a.stat.collects>0&&a.stat.collects})]})]}),desc:e.jsx("span",{className:"line-clamp-none overflow-visible whitespace-pre-wrap",children:a.summary}),image:a.images.grid,color:ae(i,{saturation:[30,35],lightness:[60,70]}).color,classNames:{image:m==="subject"?"self-start !h-[70px] !w-[50px]":"self-start !h-[50px] !w-[50px]",cardRoot:"!w-full !flex-row-reverse"}})}},dt={isValid:s=>typeof s=="string"&&s.length>0,fetch:async(s,t,n)=>{try{const i=await fetch("/api/leetcode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query questionData($titleSlug: String!) {
  question(titleSlug: $titleSlug) {translatedTitle
   difficulty
    likes
     topicTags { translatedName
 }
    stats
  }
}
`,variables:{titleSlug:s}})}).then(async h=>{if(!h.ok)throw new Error("Failed to fetch LeetCode question title");return h.json()}),d=K(i.data.question),p=JSON.parse(d.stats);t({title:e.jsx(e.Fragment,{children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex-1",children:d.translatedTitle}),e.jsx("span",{className:"shrink-0 place-self-end",children:d.likes>0&&e.jsxs("span",{className:"inline-flex shrink-0 items-center gap-1 self-center text-sm text-orange-400 dark:text-yellow-500",children:[e.jsx("i",{className:"i-mingcute-thumb-up-line"}),e.jsx("span",{className:"font-sans font-medium",children:d.likes})]})})]})}),desc:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`mr-4 font-bold ${u(d.difficulty)}`,children:d.difficulty}),e.jsx("span",{className:"overflow-hidden",children:d.topicTags.map(h=>h.translatedName).join(" / ")}),e.jsxs("span",{className:"float-right overflow-hidden",children:["AR: ",p.acRate]})]}),image:"https://upload.wikimedia.org/wikipedia/commons/1/19/LeetCode_logo_black.png",color:m(d.difficulty)}),n(`https://leetcode.cn/problems/${s}/description`)}catch(a){throw console.error("Error fetching LeetCode question data:",a),a}function m(a){switch(a){case"Easy":return"#00BFA5";case"Medium":return"#FFA726";case"Hard":return"#F44336";default:return"#757575"}}function u(a){switch(a){case"Easy":return"text-green-500";case"Medium":return"text-yellow-500";case"Hard":return"text-red-500";default:return"text-gray-500"}}}},ht={isValid:s=>typeof s=="string"&&s.length>0,fetch:async(s,t,n)=>{try{const u=(await fetch("/api/music/tencent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({songId:s})}).then(async i=>{if(!i.ok)throw new Error("Failed to fetch QQMusic song title");return i.json()})).data[0],a=u.album.mid;t({title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:u.title}),u.subtitle&&e.jsx("span",{className:"ml-2 text-sm text-gray-400",children:u.subtitle})]}),desc:e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"block",children:[e.jsx("span",{className:"font-bold",children:"歌手："}),e.jsx("span",{children:u.singer.map(i=>i.name).join(" / ")})]}),e.jsxs("span",{className:"block",children:[e.jsx("span",{className:"font-bold",children:"专辑："}),e.jsx("span",{children:u.album.name})]})]}),image:`https://y.gtimg.cn/music/photo_new/T002R300x300M000${a}.jpg?max_age=2592000`,color:"#31c27c"})}catch(m){throw console.error("Error fetching QQMusic song data:",m),m}}},ft={isValid:s=>s.length>0,fetch:async(s,t,n)=>{try{const u=(await fetch("/api/music/netease",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({songId:s})}).then(async d=>{if(!d.ok)throw new Error("Failed to fetch NeteaseMusic song title");return d.json()})).songs[0],a=u.al,i=u.ar;t({title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:u.name}),u.tns&&e.jsx("span",{className:"ml-2 text-sm text-gray-400",children:u.tns[0]})]}),desc:e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"block",children:[e.jsx("span",{className:"font-bold",children:"歌手："}),e.jsx("span",{children:i.map(d=>d.name).join(" / ")})]}),e.jsxs("span",{className:"block",children:[e.jsx("span",{className:"font-bold",children:"专辑："}),e.jsx("span",{children:a.name})]})]}),image:a.picUrl,color:"#e72d2c"})}catch(m){throw console.error("Error fetching NeteaseMusic song data:",m),m}}};export{Ct as L,Oe as R,j as a,Xe as b,Fe as u};
