const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./mermaid.core-It_nCKhk.js","./index-BrLHw_rO.js","./index-DU0cH6De.css","./owner-CdJStYC4.js"])))=>i.map(i=>d[i]);
import{r as t,_ as g,j as m}from"./index-BrLHw_rO.js";import{u as I}from"./use-is-dark-CQSQL4aT.js";import{u as w,F as y}from"./Gallery-CJAlU4I7.js";import{B as A}from"./Markdown-B7F4KgtF.js";import"./helper-jIGjUHP-.js";import"./index-NWdC_amn.js";import"./lodash-Ch6W0gOk.js";import"./use-ref-value-DeLNmgK0.js";import"./owner-CdJStYC4.js";import"./use-event-callback-DU0VCmJv.js";import"./StyledButton-CcLO_ywH.js";import"./index-Ba4KaKv3.js";import"./proxy-RnJDDj_j.js";import"./use-is-unmounted-CIFBFr9d.js";import"./index-hPcEA_SR.js";import"./dom-BowoBODo.js";import"./FloatPopover-BsJhjSNd.js";import"./spring-BSAt5qpK.js";import"./use-spring-BmvTwTfg.js";import"./use-combine-values-BYGqeSLy.js";import"./index-DW-JcjwO.js";import"./use-drag-controls-BvgSnI2Q.js";import"./index-D5dveEOu.js";import"./Shiki-k9E3sR35.js";import"./provider-CPAML1Dv.js";import"./use-animation-DiJwvt5e.js";import"./visual-element-D0q80t7I.js";import"./SocialSourceLink-DAa8hOSp.js";import"./bangumi-DGWEI3g8.js";import"./LinkCard-CzLeCwjL.js";import"./use-motion-template-ChoBp52r.js";import"./Collapse-VKiPgm-a.js";import"./useQuery-BbGCGyIB.js";const dt=s=>{const[h,d]=t.useState(!0),[E,n]=t.useState(""),[c,p]=t.useState(""),[x,u]=t.useState(),[v,l]=t.useState(),f=I();t.useEffect(()=>{g(()=>import("./mermaid.core-It_nCKhk.js").then(r=>r.bA),__vite__mapDeps([0,1,2,3]),import.meta.url).then(async r=>{r.default.initialize({theme:f?"dark":"default"})})},[f]);const a=t.useId().split(":").join("");t.useEffect(()=>{if(!s.content)return;n(""),d(!0);let r=!1;g(()=>import("./mermaid.core-It_nCKhk.js").then(o=>o.bA),__vite__mapDeps([0,1,2,3]),import.meta.url).then(async o=>{const j=o.default;let i;try{i=await j.render(`mermaid-${a}`,s.content)}catch(e){document.getElementById(`dmermaid-${a}`)?.remove(),e instanceof Error&&n(e.message),p(""),u(void 0),l(void 0)}if(!r){if(i){p(i.svg);const e=i.svg.match(/viewBox="[^"]*\s([\d.]+)\s([\d.]+)"/);e?.[1]&&e?.[2]&&(u(Number.parseInt(e?.[1])),l(Number.parseInt(e?.[2]))),n("")}return d(!1),()=>{r=!0}}})},[a,s.content]);const{w:_}=w(),S=new TextEncoder().encode(c),b=`data:image/svg+xml;base64,${btoa(String.fromCharCode(...new Uint8Array(S)))}`;return h?m.jsx(A,{children:"Mermaid Loading..."}):c?m.jsx("div",{children:m.jsx(y,{containerWidth:_,src:b,width:x,height:v})}):m.jsx("div",{className:"flex min-h-[50px] items-center justify-center rounded-lg bg-red-100 text-sm",children:E||"Error"})};export{dt as Mermaid};
