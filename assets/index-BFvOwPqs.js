import{r as d,j as y,d as L}from"./index-CCKnoTQH.js";var C=new Map,w=new WeakMap,P=0,N=void 0;function j(e){return e?(w.has(e)||(P+=1,w.set(e,P.toString())),w.get(e)):"0"}function V(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?j(e.root):e[t]}`).toString()}function A(e){const t=V(e);let r=C.get(t);if(!r){const o=new Map;let f;const n=new IntersectionObserver(i=>{i.forEach(s=>{var c;const u=s.isIntersecting&&f.some(a=>s.intersectionRatio>=a);e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=u),(c=o.get(s.target))==null||c.forEach(a=>{a(u,s)})})},e);f=n.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:n,elements:o},C.set(t,r)}return r}function T(e,t,r={},o=N){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const c=e.getBoundingClientRect();return t(o,{isIntersecting:o,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:f,observer:n,elements:i}=A(r),s=i.get(e)||[];return i.has(e)||i.set(e,s),s.push(t),n.observe(e),function(){s.splice(s.indexOf(t),1),s.length===0&&(i.delete(e),n.unobserve(e)),i.size===0&&(n.disconnect(),C.delete(f))}}function D({threshold:e,delay:t,trackVisibility:r,rootMargin:o,root:f,triggerOnce:n,skip:i,initialInView:s,fallbackInView:c,onChange:u}={}){var a;const[l,R]=d.useState(null),v=d.useRef(u),[h,b]=d.useState({inView:!!s,entry:void 0});v.current=u,d.useEffect(()=>{if(i||!l)return;let m;return m=T(l,(O,S)=>{b({inView:O,entry:S}),v.current&&v.current(O,S),S.isIntersecting&&n&&m&&(m(),m=void 0)},{root:f,rootMargin:o,threshold:e,trackVisibility:r,delay:t},c),()=>{m&&m()}},[Array.isArray(e)?e.toString():e,l,f,o,n,i,r,c,t]);const E=(a=h.entry)==null?void 0:a.target,p=d.useRef(void 0);!l&&E&&!n&&!i&&p.current!==E&&(p.current=E,b({inView:!!s,entry:void 0}));const g=[R,h.inView,h.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}const G=e=>{const{placeholder:t=null,offset:r=0,...o}=e,{ref:f,inView:n}=D({triggerOnce:!0,rootMargin:`${r||0}px`,...o}),[i,s]=d.useState(!1);return d.useEffect(()=>{n&&s(!0)},[n]),y.jsxs(y.Fragment,{children:[!i&&y.jsx("span",{"data-hide-print":!0,"data-testid":"lazyload-indicator",ref:f}),n?e.children:t]})},M="cdn.innei.ren",$=M,Q=({width:e,height:t,max:r})=>{if(e===0||t===0)throw new Error("Invalid image size");const{width:o,height:f}=r,n=o/e||1,i=f/t||1,s=Math.min(n,i,1);return{width:e*s,height:t*s}};function X(e){const t=document.createElement("canvas"),r=t.getContext("2d");t.width=1,t.height=1,r.drawImage(e,0,0,1,1);const o=r.getImageData(0,0,1,1).data;return`#${((1<<24)+(o[0]<<16)+(o[1]<<8)+o[2]).toString(16).slice(1)}`}const J=(e,t)=>new URL(e).host===$?`${e}?imageMogr2/thumbnail/${t}x/strip`:e;var I=L();const x=Symbol(),z=Symbol(),U=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent),_=U?d.useEffect:d.useLayoutEffect,W=I.unstable_runWithPriority?e=>{try{I.unstable_runWithPriority(I.unstable_NormalPriority,e)}catch(t){if(t.message==="Not implemented.")e();else throw t}}:e=>e(),B=e=>({value:r,children:o})=>{const f=d.useRef(r),n=d.useRef(0),[i,s]=d.useState(null);i&&(i(r),s(null));const c=d.useRef();if(!c.current){const u=new Set,a=(l,R)=>{n.current+=1;const v={n:n.current};R?.suspense&&(v.n*=-1,v.p=new Promise(h=>{s(()=>b=>{v.v=b,delete v.p,h(b)})})),u.forEach(h=>h(v)),l()};c.current={[x]:{v:f,n,l:u,u:a}}}return _(()=>{f.current=r,n.current+=1,W(()=>{c.current[x].l.forEach(u=>{u({n:n.current,v:r})})})},[r]),d.createElement(e,{value:c.current},o)},H=e=>e;function K(e){const t=d.createContext({[x]:{v:{current:e},n:{current:-1},l:new Set,u:r=>r()}});return t[z]=t.Provider,t.Provider=B(t.Provider),delete t.Consumer,t}function q(e,t){const r=d.useContext(e)[x],{v:{current:o},n:{current:f},l:n}=r,i=t(o),[s,c]=d.useReducer((u,a)=>{if(!a)return[o,i];if("p"in a)throw a.p;if(a.n===f)return Object.is(u[1],i)?u:[o,i];try{if("v"in a){if(Object.is(u[0],a.v))return u;const l=t(a.v);return Object.is(u[1],l)?u:[a.v,l]}}catch{}return[...u]},[o,i]);return Object.is(s[1],i)||c(),_(()=>(n.add(c),()=>{n.delete(c)}),[n]),s[1]}function Y(e){return q(e,H)}export{G as L,q as a,Q as b,K as c,Y as d,J as e,X as g,D as u};
