import{r as p}from"./index-BrLHw_rO.js";import{i as l,u as M,M as h}from"./proxy-RnJDDj_j.js";import{u as V,a as x}from"./use-combine-values-BYGqeSLy.js";import{i as J,f as E,J as F,m as I,a as f}from"./index-DW-JcjwO.js";function N(...t){const n=!Array.isArray(t[0]),o=n?0:-1,r=t[0+o],e=t[1+o],s=t[2+o],a=t[3+o],i=J(e,s,a);return n?i(r):i}function j(t,n){const o=l(t)?t.get():t,r=I(o);return A(r,t,n),r}function A(t,n,o){const r=t.get();let e=null,s=r,a;const i=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,m=()=>{e&&(e.stop(),e=null)},S=()=>{m(),e=new F({keyframes:[y(t.get()),y(s)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...o,onUpdate:a})};t.attach((c,b)=>(s=c,a=C=>b(g(C,i)),E.postRender(S),t.get()),m);let u;return l(n)&&(u=n.on("change",c=>t.set(g(c,i))),t.on("destroy",u)),u}function g(t,n){return n?t+n:t}function y(t){return typeof t=="number"?t:parseFloat(t)}function k(t){f.current=[],t();const n=V(f.current,t);return f.current=void 0,n}function w(t,n,o,r){if(typeof t=="function")return k(t);const e=typeof n=="function"?n:N(n,o,r);return Array.isArray(t)?d(t,e):d([t],([s])=>e(s))}function d(t,n){const o=M(()=>[]);return V(t,()=>{o.length=0;const r=t.length;for(let e=0;e<r;e++)o[e]=t[e].get();return n(o)})}function q(t,n={}){const{isStatic:o}=p.useContext(h),r=()=>l(t)?t.get():t;if(o)return w(r);const e=x(r());return p.useInsertionEffect(()=>A(e,t,n),[e,JSON.stringify(n)]),e}export{w as a,A as b,j as s,N as t,q as u};
