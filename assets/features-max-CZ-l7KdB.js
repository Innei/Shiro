import{K as Oe,p as js,i as Ot,b as ct,c as Ut,r as Nt,a as Is,d as Gt,e as Ue,g as ks,f as Fs,h as Os,j as Us}from"./visual-element-DOKrHDxf.js";import{p as H,u as Ns,v as b,w as Gs,x as T,y as w,f as V,z as Ne,c as O,s as Ks,j as Ws,A as Vt,n as W,m as q,B as Ge,C as Ke,t as bt,D as Hs,S as We,E as ht,d as ft}from"./index-u5xBCQz1.js";import{j as He,n as $s,p as Rt,h as Z,k as zs,v as Xs,l as Ys,q as _s,b as qs,w as Zs,x as $e,y as ze,z as Xe,B as Ye,g as _e,C as et,D as Js,L as Qs,S as ti,E as ei,F as qe,i as B,G as dt,H as Kt,s as U,I as si,J as ii,K as ni,d as Lt,r as oi,N as ri,O as ai,P as li,Q as Ze,R as ui,T as ci,U as hi,V as fi}from"./proxy-1Ogy_4R7.js";import{r as ot,j as di,k as Wt}from"./index-CCKnoTQH.js";const Je=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Qe=e=>/^0[^.\s]+$/u.test(e),pi=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mi(e){const t=pi.exec(e);if(!t)return[,];const[,s,i,o]=t;return[`--${s??i}`,o]}function ts(e,t,s=1){const[i,o]=mi(e);if(!i)return;const u=window.getComputedStyle(t).getPropertyValue(i);if(u){const n=u.trim();return Je(n)?parseFloat(n):n}return He(o)?ts(o,t,s+1):o}const gi={test:e=>e==="auto",parse:e=>e},es=e=>t=>t.test(e),ss=[$s,Rt,Z,zs,Xs,Ys,gi],Ht=e=>ss.find(es(e));function yi(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Qe(e):!0}const vi=new Set(["brightness","contrast","saturate","opacity"]);function Pi(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=s.match(Ns)||[];if(!i)return e;const o=s.replace(i,"");let u=vi.has(t)?1:0;return i!==s&&(u*=100),t+"("+u+o+")"}const xi=/\b([a-z-]*)\(.*?\)/gu,St={...H,getAnimatableNone:e=>{const t=e.match(xi);return t?t.map(Pi).join(" "):e}},Ti={..._s,color:b,backgroundColor:b,outlineColor:b,fill:b,stroke:b,borderColor:b,borderTopColor:b,borderRightColor:b,borderBottomColor:b,borderLeftColor:b,filter:St,WebkitFilter:St},is=e=>Ti[e];function ns(e,t){let s=is(e);return s!==St&&(s=H),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const Vi=new Set(["auto","none","0"]);function Si(e,t,s){let i=0,o;for(;i<e.length&&!o;){const u=e[i];typeof u=="string"&&!Vi.has(u)&&Gs(u).values.length&&(o=e[i]),i++}if(o&&s)for(const u of t)e[u]=ns(s,o)}class Ai extends Oe{constructor(t,s,i,o,u){super(t,s,i,o,u,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:i}=this;if(!s||!s.current)return;super.readKeyframes();for(let r=0;r<t.length;r++){let l=t[r];if(typeof l=="string"&&(l=l.trim(),He(l))){const c=ts(l,s.current);c!==void 0&&(t[r]=c),r===t.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!js.has(i)||t.length!==2)return;const[o,u]=t,n=Ht(o),a=Ht(u);if(n!==a)if(Ot(n)&&Ot(a))for(let r=0;r<t.length;r++){const l=t[r];typeof l=="string"&&(t[r]=parseFloat(l))}else ct[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,i=[];for(let o=0;o<t.length;o++)(t[o]===null||yi(t[o]))&&i.push(o);i.length&&Si(t,i,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ct[i](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const o=s[s.length-1];o!==void 0&&t.getValue(i,o).jump(o,!1)}measureEndState(){const{element:t,name:s,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const o=t.getValue(s);o&&o.jump(this.measuredOrigin,!1);const u=i.length-1,n=i[u];i[u]=ct[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=n),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,r])=>{t.getValue(a).set(r)}),this.resolveNoneKeyframes()}}function wi(e,t,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;t&&(i=t.current);const o=s?.[e]??i.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}const R={x:!1,y:!1};function os(){return R.x||R.y}function Di(e){return e==="x"||e==="y"?R[e]?null:(R[e]=!0,()=>{R[e]=!1}):R.x||R.y?null:(R.x=R.y=!0,()=>{R.x=R.y=!1})}function rs(e,t){const s=wi(e),i=new AbortController,o={passive:!0,...t,signal:i.signal};return[s,o,()=>i.abort()]}function $t(e){return!(e.pointerType==="touch"||os())}function Ei(e,t,s={}){const[i,o,u]=rs(e,s),n=a=>{if(!$t(a))return;const{target:r}=a,l=t(r,a);if(typeof l!="function"||!r)return;const c=h=>{$t(h)&&(l(h),r.removeEventListener("pointerleave",c))};r.addEventListener("pointerleave",c,o)};return i.forEach(a=>{a.addEventListener("pointerenter",n,o)}),u}const as=(e,t)=>t?e===t?!0:as(e,t.parentElement):!1,Mt=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Ci=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function bi(e){return Ci.has(e.tagName)||e.tabIndex!==-1}const it=new WeakSet;function zt(e){return t=>{t.key==="Enter"&&e(t)}}function pt(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Ri=(e,t)=>{const s=e.currentTarget;if(!s)return;const i=zt(()=>{if(it.has(s))return;pt(s,"down");const o=zt(()=>{pt(s,"up")}),u=()=>pt(s,"cancel");s.addEventListener("keyup",o,t),s.addEventListener("blur",u,t)});s.addEventListener("keydown",i,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",i),t)};function Xt(e){return Mt(e)&&!os()}function Li(e,t,s={}){const[i,o,u]=rs(e,s),n=a=>{const r=a.currentTarget;if(!Xt(a))return;it.add(r);const l=t(r,a),c=(d,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),it.has(r)&&it.delete(r),Xt(d)&&typeof l=="function"&&l(d,{success:m})},h=d=>{c(d,r===window||r===document||s.useGlobalTarget||as(r,d.target))},f=d=>{c(d,!1)};window.addEventListener("pointerup",h,o),window.addEventListener("pointercancel",f,o)};return i.forEach(a=>{(s.useGlobalTarget?window:a).addEventListener("pointerdown",n,o),qs(a)&&(a.addEventListener("focus",l=>Ri(l,o)),!bi(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),u}function ls(e){return Zs(e)&&"ownerSVGElement"in e}function Mi(e){return ls(e)&&e.tagName==="svg"}const Bi=[...ss,b,H],ji=e=>Bi.find(es(e));function us(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let i=0;i<s;i++)if(t[i]!==e[i])return!1;return!0}const Ii=ze.length;function cs(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?cs(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<Ii;s++){const i=ze[s],o=e.props[i];($e(o)||o===!1)&&(t[i]=o)}return t}const ki=[...Ye].reverse(),Fi=Ye.length;function Oi(e){return t=>Promise.all(t.map(({animation:s,options:i})=>Is(e,s,i)))}function Ui(e){let t=Oi(e),s=Yt(),i=!0;const o=r=>(l,c)=>{const h=Nt(e,c,r==="exit"?e.presenceContext?.custom:void 0);if(h){const{transition:f,transitionEnd:d,...m}=h;l={...l,...m,...d}}return l};function u(r){t=r(e)}function n(r){const{props:l}=e,c=cs(e.parent)||{},h=[],f=new Set;let d={},m=1/0;for(let v=0;v<Fi;v++){const p=ki[v],g=s[p],y=l[p]!==void 0?l[p]:c[p],D=$e(y),L=p===r?g.isActive:null;L===!1&&(m=v);let tt=y===c[p]&&y!==l[p]&&D;if(tt&&i&&e.manuallyAnimateOnMount&&(tt=!1),g.protectedKeys={...d},!g.isActive&&L===null||!y&&!g.prevProp||Xe(y)||typeof y=="boolean")continue;const Bt=Ni(g.prevProp,y);let at=Bt||p===r&&g.isActive&&!tt&&D||v>m&&D,jt=!1;const It=Array.isArray(y)?y:[y];let $=It.reduce(o(p),{});L===!1&&($={});const{prevResolvedValues:kt={}}=g,Bs={...kt,...$},Ft=S=>{at=!0,f.has(S)&&(jt=!0,f.delete(S)),g.needsAnimating[S]=!0;const M=e.getValue(S);M&&(M.liveStyle=!1)};for(const S in Bs){const M=$[S],lt=kt[S];if(d.hasOwnProperty(S))continue;let ut=!1;Ut(M)&&Ut(lt)?ut=!us(M,lt):ut=M!==lt,ut?M!=null?Ft(S):f.add(S):M!==void 0&&f.has(S)?Ft(S):g.protectedKeys[S]=!0}g.prevProp=y,g.prevResolvedValues=$,g.isActive&&(d={...d,...$}),i&&e.blockInitialAnimation&&(at=!1),at&&(!(tt&&Bt)||jt)&&h.push(...It.map(S=>({animation:S,options:{type:p}})))}if(f.size){const v={};if(typeof l.initial!="boolean"){const p=Nt(e,Array.isArray(l.initial)?l.initial[0]:l.initial);p&&p.transition&&(v.transition=p.transition)}f.forEach(p=>{const g=e.getBaseTarget(p),y=e.getValue(p);y&&(y.liveStyle=!0),v[p]=g??null}),h.push({animation:v})}let x=!!h.length;return i&&(l.initial===!1||l.initial===l.animate)&&!e.manuallyAnimateOnMount&&(x=!1),i=!1,x?t(h):Promise.resolve()}function a(r,l){if(s[r].isActive===l)return Promise.resolve();e.variantChildren?.forEach(h=>h.animationState?.setActive(r,l)),s[r].isActive=l;const c=n(r);for(const h in s)s[h].protectedKeys={};return c}return{animateChanges:n,setActive:a,setAnimateFunction:u,getState:()=>s,reset:()=>{s=Yt(),i=!0}}}function Ni(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!us(t,e):!1}function I(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Yt(){return{animate:I(!0),whileInView:I(),whileHover:I(),whileTap:I(),whileDrag:I(),whileFocus:I(),exit:I()}}class j{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Gi extends j{constructor(t){super(t),t.animationState||(t.animationState=Ui(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Xe(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Ki=0;class Wi extends j{constructor(){super(...arguments),this.id=Ki++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t);s&&!t&&o.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Hi={animation:{Feature:Gi},exit:{Feature:Wi}};function J(e,t,s,i={passive:!0}){return e.addEventListener(t,s,i),()=>e.removeEventListener(t,s)}function Q(e){return{point:{x:e.pageX,y:e.pageY}}}const $i=e=>t=>Mt(t)&&e(t,Q(t));function X(e,t,s,i){return J(e,t,$i(s),i)}function hs({top:e,left:t,right:s,bottom:i}){return{x:{min:t,max:s},y:{min:e,max:i}}}function zi({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Xi(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:i.y,right:i.x}}const fs=1e-4,Yi=1-fs,_i=1+fs,ds=.01,qi=0-ds,Zi=0+ds;function A(e){return e.max-e.min}function Ji(e,t,s){return Math.abs(e-t)<=s}function _t(e,t,s,i=.5){e.origin=i,e.originPoint=T(t.min,t.max,e.origin),e.scale=A(s)/A(t),e.translate=T(s.min,s.max,e.origin)-e.originPoint,(e.scale>=Yi&&e.scale<=_i||isNaN(e.scale))&&(e.scale=1),(e.translate>=qi&&e.translate<=Zi||isNaN(e.translate))&&(e.translate=0)}function Y(e,t,s,i){_t(e.x,t.x,s.x,i?i.originX:void 0),_t(e.y,t.y,s.y,i?i.originY:void 0)}function qt(e,t,s){e.min=s.min+t.min,e.max=e.min+A(t)}function Qi(e,t,s){qt(e.x,t.x,s.x),qt(e.y,t.y,s.y)}function Zt(e,t,s){e.min=t.min-s.min,e.max=e.min+A(t)}function _(e,t,s){Zt(e.x,t.x,s.x),Zt(e.y,t.y,s.y)}const Jt=()=>({translate:0,scale:1,origin:0,originPoint:0}),N=()=>({x:Jt(),y:Jt()}),Qt=()=>({min:0,max:0}),P=()=>({x:Qt(),y:Qt()});function C(e){return[e("x"),e("y")]}function mt(e){return e===void 0||e===1}function At({scale:e,scaleX:t,scaleY:s}){return!mt(e)||!mt(t)||!mt(s)}function k(e){return At(e)||ps(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function ps(e){return te(e.x)||te(e.y)}function te(e){return e&&e!=="0%"}function rt(e,t,s){const i=e-s,o=t*i;return s+o}function ee(e,t,s,i,o){return o!==void 0&&(e=rt(e,o,i)),rt(e,s,i)+t}function wt(e,t=0,s=1,i,o){e.min=ee(e.min,t,s,i,o),e.max=ee(e.max,t,s,i,o)}function ms(e,{x:t,y:s}){wt(e.x,t.translate,t.scale,t.originPoint),wt(e.y,s.translate,s.scale,s.originPoint)}const se=.999999999999,ie=1.0000000000001;function tn(e,t,s,i=!1){const o=s.length;if(!o)return;t.x=t.y=1;let u,n;for(let a=0;a<o;a++){u=s[a],n=u.projectionDelta;const{visualElement:r}=u.options;r&&r.props.style&&r.props.style.display==="contents"||(i&&u.options.layoutScroll&&u.scroll&&u!==u.root&&K(e,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),n&&(t.x*=n.x.scale,t.y*=n.y.scale,ms(e,n)),i&&k(u.latestValues)&&K(e,u.latestValues))}t.x<ie&&t.x>se&&(t.x=1),t.y<ie&&t.y>se&&(t.y=1)}function G(e,t){e.min=e.min+t,e.max=e.max+t}function ne(e,t,s,i,o=.5){const u=T(e.min,e.max,o);wt(e,t,s,u,i)}function K(e,t){ne(e.x,t.x,t.scaleX,t.scale,t.originX),ne(e.y,t.y,t.scaleY,t.scale,t.originY)}function gs(e,t){return hs(Xi(e.getBoundingClientRect(),t))}function en(e,t,s){const i=gs(e,s),{scroll:o}=t;return o&&(G(i.x,o.offset.x),G(i.y,o.offset.y)),i}const ys=({current:e})=>e?e.ownerDocument.defaultView:null,oe=(e,t)=>Math.abs(e-t);function sn(e,t){const s=oe(e.x,t.x),i=oe(e.y,t.y);return Math.sqrt(s**2+i**2)}class vs{constructor(t,s,{transformPagePoint:i,contextWindow:o=window,dragSnapToOrigin:u=!1,distanceThreshold:n=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=yt(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,m=sn(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!d&&!m)return;const{point:x}=f,{timestamp:v}=w;this.history.push({...x,timestamp:v});const{onStart:p,onMove:g}=this.handlers;d||(p&&p(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,d)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=gt(d,this.transformPagePoint),V.update(this.updatePoint,!0)},this.handlePointerUp=(f,d)=>{this.end();const{onEnd:m,onSessionEnd:x,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=yt(f.type==="pointercancel"?this.lastMoveEventInfo:gt(d,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,p),x&&x(f,p)},!Mt(t))return;this.dragSnapToOrigin=u,this.handlers=s,this.transformPagePoint=i,this.distanceThreshold=n,this.contextWindow=o||window;const a=Q(t),r=gt(a,this.transformPagePoint),{point:l}=r,{timestamp:c}=w;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=s;h&&h(t,yt(r,this.history)),this.removeListeners=Ne(X(this.contextWindow,"pointermove",this.handlePointerMove),X(this.contextWindow,"pointerup",this.handlePointerUp),X(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),O(this.updatePoint)}}function gt(e,t){return t?{point:t(e.point)}:e}function re(e,t){return{x:e.x-t.x,y:e.y-t.y}}function yt({point:e},t){return{point:e,delta:re(e,Ps(t)),offset:re(e,nn(t)),velocity:on(t,.1)}}function nn(e){return e[0]}function Ps(e){return e[e.length-1]}function on(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,i=null;const o=Ps(e);for(;s>=0&&(i=e[s],!(o.timestamp-i.timestamp>Ks(t)));)s--;if(!i)return{x:0,y:0};const u=Ws(o.timestamp-i.timestamp);if(u===0)return{x:0,y:0};const n={x:(o.x-i.x)/u,y:(o.y-i.y)/u};return n.x===1/0&&(n.x=0),n.y===1/0&&(n.y=0),n}function rn(e,{min:t,max:s},i){return t!==void 0&&e<t?e=i?T(t,e,i.min):Math.max(e,t):s!==void 0&&e>s&&(e=i?T(s,e,i.max):Math.min(e,s)),e}function ae(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function an(e,{top:t,left:s,bottom:i,right:o}){return{x:ae(e.x,s,o),y:ae(e.y,t,i)}}function le(e,t){let s=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,i]=[i,s]),{min:s,max:i}}function ln(e,t){return{x:le(e.x,t.x),y:le(e.y,t.y)}}function un(e,t){let s=.5;const i=A(e),o=A(t);return o>i?s=Vt(t.min,t.max-i,e.min):i>o&&(s=Vt(e.min,e.max-o,t.min)),_e(0,1,s)}function cn(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const Dt=.35;function hn(e=Dt){return e===!1?e=0:e===!0&&(e=Dt),{x:ue(e,"left","right"),y:ue(e,"top","bottom")}}function ue(e,t,s){return{min:ce(e,t),max:ce(e,s)}}function ce(e,t){return typeof e=="number"?e:e[t]||0}const fn=new WeakMap;class dn{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=P(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:s=!1,distanceThreshold:i}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const u=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Q(h).point)},n=(h,f)=>{const{drag:d,dragPropagation:m,onDragStart:x}=this.getProps();if(d&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Di(d),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),C(p=>{let g=this.getAxisMotionValue(p).get()||0;if(Z.test(g)){const{projection:y}=this.visualElement;if(y&&y.layout){const D=y.layout.layoutBox[p];D&&(g=A(D)*(parseFloat(g)/100))}}this.originPoint[p]=g}),x&&V.postRender(()=>x(h,f)),Gt(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:d,dragDirectionLock:m,onDirectionLock:x,onDrag:v}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:p}=f;if(m&&this.currentDirection===null){this.currentDirection=pn(p),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",f.point,p),this.updateAxis("y",f.point,p),this.visualElement.render(),v&&v(h,f)},r=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>C(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:c}=this.getProps();this.panSession=new vs(t,{onSessionStart:u,onStart:n,onMove:a,onSessionEnd:r,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:i,contextWindow:ys(this.visualElement)})}stop(t,s){const i=t||this.latestPointerEvent,o=s||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!o||!i)return;const{velocity:n}=o;this.startAnimation(n);const{onDragEnd:a}=this.getProps();a&&V.postRender(()=>a(i,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,i){const{drag:o}=this.getProps();if(!i||!st(t,o,this.currentDirection))return;const u=this.getAxisMotionValue(t);let n=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(n=rn(n,this.constraints[t],this.elastic[t])),u.set(n)}resolveConstraints(){const{dragConstraints:t,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;t&&et(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=an(i.layoutBox,t):this.constraints=!1,this.elastic=hn(s),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&C(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=cn(i.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!et(t))return!1;const i=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const u=en(i,o.root,this.visualElement.getTransformPagePoint());let n=ln(o.layout.layoutBox,u);if(s){const a=s(zi(n));this.hasMutatedConstraints=!!a,a&&(n=hs(a))}return n}startAnimation(t){const{drag:s,dragMomentum:i,dragElastic:o,dragTransition:u,dragSnapToOrigin:n,onDragTransitionEnd:a}=this.getProps(),r=this.constraints||{},l=C(c=>{if(!st(c,s,this.currentDirection))return;let h=r&&r[c]||{};n&&(h={min:0,max:0});const f=o?200:1e6,d=o?40:1e7,m={type:"inertia",velocity:i?t[c]:0,bounceStiffness:f,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...u,...h};return this.startAxisValueAnimation(c,m)});return Promise.all(l).then(a)}startAxisValueAnimation(t,s){const i=this.getAxisMotionValue(t);return Gt(this.visualElement,t),i.start(Ue(t,i,0,s,this.visualElement,!1))}stopAnimation(){C(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){C(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),o=i[s];return o||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){C(s=>{const{drag:i}=this.getProps();if(!st(s,i,this.currentDirection))return;const{projection:o}=this.visualElement,u=this.getAxisMotionValue(s);if(o&&o.layout){const{min:n,max:a}=o.layout.layoutBox[s];u.set(t[s]-T(n,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:i}=this.visualElement;if(!et(s)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};C(n=>{const a=this.getAxisMotionValue(n);if(a&&this.constraints!==!1){const r=a.get();o[n]=un({min:r,max:r},this.constraints[n])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),C(n=>{if(!st(n,t,null))return;const a=this.getAxisMotionValue(n),{min:r,max:l}=this.constraints[n];a.set(T(r,l,o[n]))})}addListeners(){if(!this.visualElement.current)return;fn.set(this.visualElement,this);const t=this.visualElement.current,s=X(t,"pointerdown",r=>{const{drag:l,dragListener:c=!0}=this.getProps();l&&c&&this.start(r)}),i=()=>{const{dragConstraints:r}=this.getProps();et(r)&&r.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,u=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),V.read(i);const n=J(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",({delta:r,hasLayoutChanged:l})=>{this.isDragging&&l&&(C(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=r[c].translate,h.set(h.get()+r[c].translate))}),this.visualElement.render())});return()=>{n(),s(),u(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:u=!1,dragElastic:n=Dt,dragMomentum:a=!0}=t;return{...t,drag:s,dragDirectionLock:i,dragPropagation:o,dragConstraints:u,dragElastic:n,dragMomentum:a}}}function st(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function pn(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class mn extends j{constructor(t){super(t),this.removeGroupControls=W,this.removeListeners=W,this.controls=new dn(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||W}unmount(){this.removeGroupControls(),this.removeListeners()}}const he=e=>(t,s)=>{e&&V.postRender(()=>e(t,s))};class gn extends j{constructor(){super(...arguments),this.removePointerDownListener=W}onPointerDown(t){this.session=new vs(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ys(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:he(t),onStart:he(s),onMove:i,onEnd:(u,n)=>{delete this.session,o&&V.postRender(()=>o(u,n))}}}mount(){this.removePointerDownListener=X(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const nt={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fe(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const z={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Rt.test(e))e=parseFloat(e);else return e;const s=fe(e,t.target.x),i=fe(e,t.target.y);return`${s}% ${i}%`}},yn={correct:(e,{treeScale:t,projectionDelta:s})=>{const i=e,o=H.parse(e);if(o.length>5)return i;const u=H.createTransformer(e),n=typeof o[0]!="number"?1:0,a=s.x.scale*t.x,r=s.y.scale*t.y;o[0+n]/=a,o[1+n]/=r;const l=T(a,r,.5);return typeof o[2+n]=="number"&&(o[2+n]/=l),typeof o[3+n]=="number"&&(o[3+n]/=l),u(o)}};let de=!1;class vn extends ot.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:i,layoutId:o}=this.props,{projection:u}=t;ei(Pn),u&&(s.group&&s.group.add(u),i&&i.register&&o&&i.register(u),de&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),nt.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:i,drag:o,isPresent:u}=this.props,{projection:n}=i;return n&&(n.isPresent=u,de=!0,o||t.layoutDependency!==s||s===void 0||t.isPresent!==u?n.willUpdate():this.safeToRemove(),t.isPresent!==u&&(u?n.promote():n.relegate()||V.postRender(()=>{const a=n.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),qe.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:i}=this.props,{projection:o}=t;o&&(o.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function xs(e){const[t,s]=Js(),i=ot.useContext(Qs);return di.jsx(vn,{...e,layoutGroup:i,switchLayoutGroup:ot.useContext(ti),isPresent:t,safeToRemove:s})}const Pn={borderRadius:{...z,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:z,borderTopRightRadius:z,borderBottomLeftRadius:z,borderBottomRightRadius:z,boxShadow:yn};function xn(e,t,s){const i=B(e)?e:q(e);return i.start(Ue("",i,t,s)),i.animation}const Tn=(e,t)=>e.depth-t.depth;class Vn{constructor(){this.children=[],this.isDirty=!1}add(t){Ge(this.children,t),this.isDirty=!0}remove(t){Ke(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Tn),this.isDirty=!1,this.children.forEach(t)}}function Sn(e,t){const s=bt.now(),i=({timestamp:o})=>{const u=o-s;u>=t&&(O(i),e(u-t))};return V.setup(i,!0),()=>O(i)}const Ts=["TopLeft","TopRight","BottomLeft","BottomRight"],An=Ts.length,pe=e=>typeof e=="string"?parseFloat(e):e,me=e=>typeof e=="number"||Rt.test(e);function wn(e,t,s,i,o,u){o?(e.opacity=T(0,s.opacity??1,Dn(i)),e.opacityExit=T(t.opacity??1,0,En(i))):u&&(e.opacity=T(t.opacity??1,s.opacity??1,i));for(let n=0;n<An;n++){const a=`border${Ts[n]}Radius`;let r=ge(t,a),l=ge(s,a);if(r===void 0&&l===void 0)continue;r||(r=0),l||(l=0),r===0||l===0||me(r)===me(l)?(e[a]=Math.max(T(pe(r),pe(l),i),0),(Z.test(l)||Z.test(r))&&(e[a]+="%")):e[a]=l}(t.rotate||s.rotate)&&(e.rotate=T(t.rotate||0,s.rotate||0,i))}function ge(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Dn=Vs(0,.5,Hs),En=Vs(.5,.95,W);function Vs(e,t,s){return i=>i<e?0:i>t?1:s(Vt(e,t,i))}function ye(e,t){e.min=t.min,e.max=t.max}function E(e,t){ye(e.x,t.x),ye(e.y,t.y)}function ve(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Pe(e,t,s,i,o){return e-=t,e=rt(e,1/s,i),o!==void 0&&(e=rt(e,1/o,i)),e}function Cn(e,t=0,s=1,i=.5,o,u=e,n=e){if(Z.test(t)&&(t=parseFloat(t),t=T(n.min,n.max,t/100)-n.min),typeof t!="number")return;let a=T(u.min,u.max,i);e===u&&(a-=t),e.min=Pe(e.min,t,s,a,o),e.max=Pe(e.max,t,s,a,o)}function xe(e,t,[s,i,o],u,n){Cn(e,t[s],t[i],t[o],t.scale,u,n)}const bn=["x","scaleX","originX"],Rn=["y","scaleY","originY"];function Te(e,t,s,i){xe(e.x,t,bn,s?s.x:void 0,i?i.x:void 0),xe(e.y,t,Rn,s?s.y:void 0,i?i.y:void 0)}function Ve(e){return e.translate===0&&e.scale===1}function Ss(e){return Ve(e.x)&&Ve(e.y)}function Se(e,t){return e.min===t.min&&e.max===t.max}function Ln(e,t){return Se(e.x,t.x)&&Se(e.y,t.y)}function Ae(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function As(e,t){return Ae(e.x,t.x)&&Ae(e.y,t.y)}function we(e){return A(e.x)/A(e.y)}function De(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Mn{constructor(){this.members=[]}add(t){Ge(this.members,t),t.scheduleRender()}remove(t){if(Ke(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(o=>t===o);if(s===0)return!1;let i;for(let o=s;o>=0;o--){const u=this.members[o];if(u.isPresent!==!1){i=u;break}}return i?(this.promote(i),!0):!1}promote(t,s){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,s&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:i}=t;s.onExitComplete&&s.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Bn(e,t,s){let i="";const o=e.x.translate/t.x,u=e.y.translate/t.y,n=s?.z||0;if((o||u||n)&&(i=`translate3d(${o}px, ${u}px, ${n}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:l,rotate:c,rotateX:h,rotateY:f,skewX:d,skewY:m}=s;l&&(i=`perspective(${l}px) ${i}`),c&&(i+=`rotate(${c}deg) `),h&&(i+=`rotateX(${h}deg) `),f&&(i+=`rotateY(${f}deg) `),d&&(i+=`skewX(${d}deg) `),m&&(i+=`skewY(${m}deg) `)}const a=e.x.scale*t.x,r=e.y.scale*t.y;return(a!==1||r!==1)&&(i+=`scale(${a}, ${r})`),i||"none"}const F={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},vt=["","X","Y","Z"],jn=1e3;let In=0;function Pt(e,t,s,i){const{latestValues:o}=t;o[e]&&(s[e]=o[e],t.setStaticValue(e,0),i&&(i[e]=0))}function ws(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=Fs(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:o,layoutId:u}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",V,!(o||u))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&ws(i)}function Ds({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(n={},a=t?.()){this.id=In++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,U.value&&(F.nodes=F.calculatedTargetDeltas=F.calculatedProjections=0),this.nodes.forEach(On),this.nodes.forEach(Kn),this.nodes.forEach(Wn),this.nodes.forEach(Un),U.addProjectionMetrics&&U.addProjectionMetrics(F)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=n,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let r=0;r<this.path.length;r++)this.path[r].shouldResetTransform=!0;this.root===this&&(this.nodes=new Vn)}addEventListener(n,a){return this.eventHandlers.has(n)||this.eventHandlers.set(n,new We),this.eventHandlers.get(n).add(a)}notifyListeners(n,...a){const r=this.eventHandlers.get(n);r&&r.notify(...a)}hasListeners(n){return this.eventHandlers.has(n)}mount(n){if(this.instance)return;this.isSVG=ls(n)&&!Mi(n),this.instance=n;const{layoutId:a,layout:r,visualElement:l}=this.options;if(l&&!l.current&&l.mount(n),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||a)&&(this.isLayoutDirty=!0),e){let c,h=0;const f=()=>this.root.updateBlockedByResize=!1;V.read(()=>{h=window.innerWidth}),e(n,()=>{const d=window.innerWidth;d!==h&&(h=d,this.root.updateBlockedByResize=!0,c&&c(),c=Sn(f,250),nt.hasAnimatedSinceResize&&(nt.hasAnimatedSinceResize=!1,this.nodes.forEach(be)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&l&&(a||r)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:d})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||l.getDefaultTransition()||Yn,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=l.getProps(),p=!this.targetLayout||!As(this.targetLayout,d),g=!h&&f;if(this.options.layoutRoot||this.resumeFrom||g||h&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const y={...ks(m,"layout"),onPlay:x,onComplete:v};(l.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y),this.setAnimationOrigin(c,g)}else h||be(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=d})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const n=this.getStack();n&&n.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),O(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hn),this.animationId++)}getTransformTemplate(){const{visualElement:n}=this.options;return n&&n.getProps().transformTemplate}willUpdate(n=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ws(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:r}=this.options;if(a===void 0&&!r)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),n&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ee);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ce);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Gn),this.nodes.forEach(kn),this.nodes.forEach(Fn)):this.nodes.forEach(Ce),this.clearAllSnapshots();const a=bt.now();w.delta=_e(0,1e3/60,a-w.timestamp),w.timestamp=a,w.isProcessing=!0,ht.update.process(w),ht.preRender.process(w),ht.render.process(w),w.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qe.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Nn),this.sharedNodes.forEach($n)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,V.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){V.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!A(this.snapshot.measuredBox.x)&&!A(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++)this.path[r].updateScroll();const n=this.layout;this.layout=this.measure(!1),this.layoutCorrected=P(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,n?n.layoutBox:void 0)}updateScroll(n="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===n&&(a=!1),a&&this.instance){const r=i(this.instance);this.scroll={animationId:this.root.animationId,phase:n,isRoot:r,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:r}}}resetTransform(){if(!o)return;const n=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Ss(this.projectionDelta),r=this.getTransformTemplate(),l=r?r(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;n&&this.instance&&(a||k(this.latestValues)||c)&&(o(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(n=!0){const a=this.measurePageBox();let r=this.removeElementScroll(a);return n&&(r=this.removeTransform(r)),_n(r),{animationId:this.root.animationId,measuredBox:a,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:n}=this.options;if(!n)return P();const a=n.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(qn))){const{scroll:l}=this.root;l&&(G(a.x,l.offset.x),G(a.y,l.offset.y))}return a}removeElementScroll(n){const a=P();if(E(a,n),this.scroll?.wasRoot)return a;for(let r=0;r<this.path.length;r++){const l=this.path[r],{scroll:c,options:h}=l;l!==this.root&&c&&h.layoutScroll&&(c.wasRoot&&E(a,n),G(a.x,c.offset.x),G(a.y,c.offset.y))}return a}applyTransform(n,a=!1){const r=P();E(r,n);for(let l=0;l<this.path.length;l++){const c=this.path[l];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&K(r,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),k(c.latestValues)&&K(r,c.latestValues)}return k(this.latestValues)&&K(r,this.latestValues),r}removeTransform(n){const a=P();E(a,n);for(let r=0;r<this.path.length;r++){const l=this.path[r];if(!l.instance||!k(l.latestValues))continue;At(l.latestValues)&&l.updateSnapshot();const c=P(),h=l.measurePageBox();E(c,h),Te(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return k(this.latestValues)&&Te(a,this.latestValues),a}setTargetDelta(n){this.targetDelta=n,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(n){this.options={...this.options,...n,crossfade:n.crossfade!==void 0?n.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==w.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(n=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const r=!!this.resumingFrom||this!==a;if(!(n||r&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:h}=this.options;if(!(!this.layout||!(c||h))){if(this.resolvedRelativeTargetAt=w.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=P(),this.relativeTargetOrigin=P(),_(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),E(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=P(),this.targetWithTransforms=P()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qi(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):E(this.target,this.layout.layoutBox),ms(this.target,this.targetDelta)):E(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=P(),this.relativeTargetOrigin=P(),_(this.relativeTargetOrigin,this.target,f.target),E(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}U.value&&F.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||At(this.parent.latestValues)||ps(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const n=this.getLead(),a=!!this.resumingFrom||this!==n;let r=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(r=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===w.timestamp&&(r=!1),r)return;const{layout:l,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||c))return;E(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;tn(this.layoutCorrected,this.treeScale,this.path,a),n.layout&&!n.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(n.target=n.layout.layoutBox,n.targetWithTransforms=P());const{target:d}=n;if(!d){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ve(this.prevProjectionDelta.x,this.projectionDelta.x),ve(this.prevProjectionDelta.y,this.projectionDelta.y)),Y(this.projectionDelta,this.layoutCorrected,d,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!De(this.projectionDelta.x,this.prevProjectionDelta.x)||!De(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",d)),U.value&&F.calculatedProjections++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(n=!0){if(this.options.visualElement?.scheduleRender(),n){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=N(),this.projectionDelta=N(),this.projectionDeltaWithTransform=N()}setAnimationOrigin(n,a=!1){const r=this.snapshot,l=r?r.latestValues:{},c={...this.latestValues},h=N();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=P(),d=r?r.source:void 0,m=this.layout?this.layout.source:void 0,x=d!==m,v=this.getStack(),p=!v||v.members.length<=1,g=!!(x&&!p&&this.options.crossfade===!0&&!this.path.some(Xn));this.animationProgress=0;let y;this.mixTargetDelta=D=>{const L=D/1e3;Re(h.x,n.x,L),Re(h.y,n.y,L),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zn(this.relativeTarget,this.relativeTargetOrigin,f,L),y&&Ln(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=P()),E(y,this.relativeTarget)),x&&(this.animationValues=c,wn(c,l,this.latestValues,L,g,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(n){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(O(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=V.update(()=>{nt.hasAnimatedSinceResize=!0,ft.layout++,this.motionValue||(this.motionValue=q(0)),this.currentAnimation=xn(this.motionValue,[0,1e3],{...n,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),n.onUpdate&&n.onUpdate(a)},onStop:()=>{ft.layout--},onComplete:()=>{ft.layout--,n.onComplete&&n.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const n=this.getStack();n&&n.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(jn),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const n=this.getLead();let{targetWithTransforms:a,target:r,layout:l,latestValues:c}=n;if(!(!a||!r||!l)){if(this!==n&&this.layout&&l&&Es(this.options.animationType,this.layout.layoutBox,l.layoutBox)){r=this.target||P();const h=A(this.layout.layoutBox.x);r.x.min=n.target.x.min,r.x.max=r.x.min+h;const f=A(this.layout.layoutBox.y);r.y.min=n.target.y.min,r.y.max=r.y.min+f}E(a,r),K(a,c),Y(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(n,a){this.sharedNodes.has(n)||this.sharedNodes.set(n,new Mn),this.sharedNodes.get(n).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const n=this.getStack();return n?n.lead===this:!0}getLead(){const{layoutId:n}=this.options;return n?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:n}=this.options;return n?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:n}=this.options;if(n)return this.root.sharedNodes.get(n)}promote({needsReset:n,transition:a,preserveFollowOpacity:r}={}){const l=this.getStack();l&&l.promote(this,r),n&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const n=this.getStack();return n?n.relegate(this):!1}resetSkewAndRotation(){const{visualElement:n}=this.options;if(!n)return;let a=!1;const{latestValues:r}=n;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(a=!0),!a)return;const l={};r.z&&Pt("z",n,l,this.animationValues);for(let c=0;c<vt.length;c++)Pt(`rotate${vt[c]}`,n,l,this.animationValues),Pt(`skew${vt[c]}`,n,l,this.animationValues);n.render();for(const c in l)n.setStaticValue(c,l[c]),this.animationValues&&(this.animationValues[c]=l[c]);n.scheduleRender()}applyProjectionStyles(n,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){n.visibility="hidden";return}const r=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,n.visibility="",n.opacity="",n.pointerEvents=dt(a?.pointerEvents)||"",n.transform=r?r(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(n.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,n.pointerEvents=dt(a?.pointerEvents)||""),this.hasProjected&&!k(this.latestValues)&&(n.transform=r?r({},""):"none",this.hasProjected=!1);return}n.visibility="";const c=l.animationValues||l.latestValues;this.applyTransformsToTarget();let h=Bn(this.projectionDeltaWithTransform,this.treeScale,c);r&&(h=r(c,h)),n.transform=h;const{x:f,y:d}=this.projectionDelta;n.transformOrigin=`${f.origin*100}% ${d.origin*100}% 0`,l.animationValues?n.opacity=l===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:n.opacity=l===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const m in Kt){if(c[m]===void 0)continue;const{correct:x,applyTo:v,isCSSVariable:p}=Kt[m],g=h==="none"?c[m]:x(c[m],l);if(v){const y=v.length;for(let D=0;D<y;D++)n[v[D]]=g}else p?this.options.visualElement.renderState.vars[m]=g:n[m]=g}this.options.layoutId&&(n.pointerEvents=l===this?dt(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(n=>n.currentAnimation?.stop()),this.root.nodes.forEach(Ee),this.root.sharedNodes.clear()}}}function kn(e){e.updateLayout()}function Fn(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=e.layout,{animationType:o}=e.options,u=t.source!==e.layout.source;o==="size"?C(c=>{const h=u?t.measuredBox[c]:t.layoutBox[c],f=A(h);h.min=s[c].min,h.max=h.min+f}):Es(o,t.layoutBox,s)&&C(c=>{const h=u?t.measuredBox[c]:t.layoutBox[c],f=A(s[c]);h.max=h.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[c].max=e.relativeTarget[c].min+f)});const n=N();Y(n,s,t.layoutBox);const a=N();u?Y(a,e.applyTransform(i,!0),t.measuredBox):Y(a,s,t.layoutBox);const r=!Ss(n);let l=!1;if(!e.resumeFrom){const c=e.getClosestProjectingParent();if(c&&!c.resumeFrom){const{snapshot:h,layout:f}=c;if(h&&f){const d=P();_(d,t.layoutBox,h.layoutBox);const m=P();_(m,s,f.layoutBox),As(d,m)||(l=!0),c.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=d,e.relativeParent=c)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:a,layoutDelta:n,hasLayoutChanged:r,hasRelativeLayoutChanged:l})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function On(e){U.value&&F.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Un(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Nn(e){e.clearSnapshot()}function Ee(e){e.clearMeasurements()}function Ce(e){e.isLayoutDirty=!1}function Gn(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function be(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Kn(e){e.resolveTargetDelta()}function Wn(e){e.calcProjection()}function Hn(e){e.resetSkewAndRotation()}function $n(e){e.removeLeadSnapshot()}function Re(e,t,s){e.translate=T(t.translate,0,s),e.scale=T(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function Le(e,t,s,i){e.min=T(t.min,s.min,i),e.max=T(t.max,s.max,i)}function zn(e,t,s,i){Le(e.x,t.x,s.x,i),Le(e.y,t.y,s.y,i)}function Xn(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Yn={duration:.45,ease:[.4,0,.1,1]},Me=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Be=Me("applewebkit/")&&!Me("chrome/")?Math.round:W;function je(e){e.min=Be(e.min),e.max=Be(e.max)}function _n(e){je(e.x),je(e.y)}function Es(e,t,s){return e==="position"||e==="preserve-aspect"&&!Ji(we(t),we(s),.2)}function qn(e){return e!==e.root&&e.scroll?.wasRoot}const Zn=Ds({attachResizeListener:(e,t)=>J(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xt={current:void 0},Cs=Ds({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!xt.current){const e=new Zn({});e.mount(window),e.setOptions({layoutScroll:!0}),xt.current=e}return xt.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Jn={pan:{Feature:gn},drag:{Feature:mn,ProjectionNode:Cs,MeasureLayout:xs}};function Ie(e,t,s){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",s==="Start");const o="onHover"+s,u=i[o];u&&V.postRender(()=>u(t,Q(t)))}class Qn extends j{mount(){const{current:t}=this.node;t&&(this.unmount=Ei(t,(s,i)=>(Ie(this.node,i,"Start"),o=>Ie(this.node,o,"End"))))}unmount(){}}class to extends j{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ne(J(this.node.current,"focus",()=>this.onFocus()),J(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ke(e,t,s){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",s==="Start");const o="onTap"+(s==="End"?"":s),u=i[o];u&&V.postRender(()=>u(t,Q(t)))}class eo extends j{mount(){const{current:t}=this.node;t&&(this.unmount=Li(t,(s,i)=>(ke(this.node,i,"Start"),(o,{success:u})=>ke(this.node,o,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Et=new WeakMap,Tt=new WeakMap,so=e=>{const t=Et.get(e.target);t&&t(e)},io=e=>{e.forEach(so)};function no({root:e,...t}){const s=e||document;Tt.has(s)||Tt.set(s,{});const i=Tt.get(s),o=JSON.stringify(t);return i[o]||(i[o]=new IntersectionObserver(io,{root:e,...t})),i[o]}function oo(e,t,s){const i=no(t);return Et.set(e,s),i.observe(e),()=>{Et.delete(e),i.unobserve(e)}}const ro={some:0,all:1};class ao extends j{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:i,amount:o="some",once:u}=t,n={root:s?s.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:ro[o]},a=r=>{const{isIntersecting:l}=r;if(this.isInView===l||(this.isInView=l,u&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),f=l?c:h;f&&f(r)};return oo(this.node.current,n,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(lo(t,s))&&this.startObserver()}unmount(){}}function lo({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const uo={inView:{Feature:ao},tap:{Feature:eo},focus:{Feature:to},hover:{Feature:Qn}},co={layout:{ProjectionNode:Cs,MeasureLayout:xs}},Ct={current:null},bs={current:!1};function ho(){if(bs.current=!0,!!si)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ct.current=e.matches;e.addEventListener("change",t),t()}else Ct.current=!1}const fo=new WeakMap;function po(e,t,s){for(const i in t){const o=t[i],u=s[i];if(B(o))e.addValue(i,o);else if(B(u))e.addValue(i,q(o,{owner:e}));else if(u!==o)if(e.hasValue(i)){const n=e.getValue(i);n.liveStyle===!0?n.jump(o):n.hasAnimated||n.set(o)}else{const n=e.getStaticValue(i);e.addValue(i,q(n!==void 0?n:o,{owner:e}))}}for(const i in s)t[i]===void 0&&e.removeValue(i);return t}const Fe=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class mo{scrapeMotionValuesFromProps(t,s,i){return{}}constructor({parent:t,props:s,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:u,visualState:n},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Oe,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=bt.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,V.render(this.render,!1,!0))};const{latestValues:r,renderState:l}=n;this.latestValues=r,this.baseTarget={...r},this.initialValues=s.initial?{...r}:{},this.renderState=l,this.parent=t,this.props=s,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!u,this.isControllingVariants=ii(s),this.isVariantNode=ni(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(s,{},this);for(const f in h){const d=h[f];r[f]!==void 0&&B(d)&&d.set(r[f],!1)}}mount(t){this.current=t,fo.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,i)=>this.bindToMotionValue(i,s)),bs.current||ho(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ct.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),O(this.notifyUpdate),O(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Lt.has(t);i&&this.onBindTransform&&this.onBindTransform();const o=s.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&V.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),u=s.on("renderRequest",this.scheduleRender);let n;window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{o(),u(),n&&n(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Wt){const s=Wt[t];if(!s)continue;const{isEnabled:i,Feature:o}=s;if(!this.features[t]&&o&&i(this.props)&&(this.features[t]=new o(this)),this.features[t]){const u=this.features[t];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):P()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let i=0;i<Fe.length;i++){const o=Fe[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const u="on"+o,n=t[u];n&&(this.propEventSubscriptions[o]=this.on(o,n))}this.prevMotionValues=po(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const i=this.values.get(t);s!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&s!==void 0&&(i=q(s===null?void 0:s,{owner:this}),this.addValue(t,i)),i}readValue(t,s){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(Je(i)||Qe(i))?i=parseFloat(i):!ji(i)&&H.test(s)&&(i=ns(t,s)),this.setBaseTarget(t,B(i)?i.get():i)),B(i)?i.get():i}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const u=oi(this.props,s,this.presenceContext?.custom);u&&(i=u[t])}if(s&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!B(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new We),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class Rs extends mo{constructor(){super(...arguments),this.KeyframeResolver=Ai}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:i}){delete s[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;B(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function Ls(e,{style:t,vars:s},i,o){const u=e.style;let n;for(n in t)u[n]=t[n];o?.applyProjectionStyles(u,i);for(n in s)u.setProperty(n,s[n])}function go(e){return window.getComputedStyle(e)}class yo extends Rs{constructor(){super(...arguments),this.type="html",this.renderInstance=Ls}readValueFromInstance(t,s){if(Lt.has(s))return this.projection?.isProjecting?Os(s):Us(t,s);{const i=go(t),o=(ri(s)?i.getPropertyValue(s):i[s])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:s}){return gs(t,s)}build(t,s,i){ai(t,s,i.transformTemplate)}scrapeMotionValuesFromProps(t,s,i){return li(t,s,i)}}const Ms=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vo(e,t,s,i){Ls(e,t,void 0,i);for(const o in t.attrs)e.setAttribute(Ms.has(o)?o:Ze(o),t.attrs[o])}class Po extends Rs{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=P}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Lt.has(s)){const i=is(s);return i&&i.default||0}return s=Ms.has(s)?s:Ze(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,i){return ui(t,s,i)}build(t,s,i){ci(t,s,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,s,i,o){vo(t,s,i,o)}mount(t){this.isSVGTag=hi(t.tagName),super.mount(t)}}const xo=(e,t)=>fi(e)?new Po(t):new yo(t,{allowProjection:e!==ot.Fragment}),To={renderer:xo,...Hi,...uo},bo={...To,...Jn,...co};export{ts as A,mi as B,os as C,Ai as D,R as E,Vn as F,Di as G,yo as H,Ei as I,Li as J,as as K,Mt as L,ss as M,Ht as N,Ti as O,is as P,es as Q,ns as R,Po as S,ji as T,mo as V,Hi as a,Jn as b,xo as c,bo as d,ho as e,P as f,uo as g,bs as h,ls as i,Mi as j,xn as k,co as l,J as m,xt as n,X as o,Ct as p,$i as q,wi as r,A as s,To as t,Sn as u,fo as v,oe as w,sn as x,Je as y,Qe as z};
